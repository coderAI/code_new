<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="view_vhr_erp_bonus_scheme_form" model="ir.ui.view">
            <field name="name">vhr.erp.bonus.scheme.form</field>
            <field name="model">vhr.erp.bonus.scheme</field>
            <field name="arch" type="xml">
                <form string="ERP Setting" version="7.0">
       				<sheet>
       					<group string="ERP Setting">
	       					<group>
<!-- 	       						<field name="job_level_id"  class="oe_inline" required="1" -->
<!-- 	       							on_change="onchange_job_level_id(job_level_id)" -->
<!-- 	       							options="{'no_quick_create' : True, 'no_create':True, 'no_open': True}"/> -->
	       						<field name="erp_level_id"  class="oe_inline" required="0"
	       							options="{'no_quick_create' : True, 'no_create':True, 'no_open': True}"/>
	       						<field name="job_level_position_id"  class="oe_inline" required="0"
	       							options="{'no_quick_create' : True, 'no_create':True, 'no_open': True}"/>
	       						<field name="total_bonus" class="oe_inline" required="1"/>	                            
	       					</group>
	       					<group>
	       						<field name="job_family_id"  class="oe_inline" on_change="onchange_job_family_id(job_family_id)"
	       							options="{'no_quick_create' : True, 'no_create':True, 'no_open': True}"/>
	                            <field name="job_group_id" class="oe_inline"   
	                            	options="{'no_quick_create' : True, 'no_create':True, 'no_open': True}"/>
	       						<field name="total_bonus_specialerp" class="oe_inline" required="0" invisible="1"/>
	       						<field name="active"/>
	       						
	       					</group>
       					</group>
       					<group  string="Payment time">
       						<group>
	       						<field name="paymenttime1_id" class="oe_inline" required="1" 
	       							options="{'no_quick_create' : True, 'no_create':True, 'no_open': True}"/>
	                          	<field name="payment1rate" class="oe_inline" required="1"/>
                         		<field name="paymenttime2_id" class="oe_inline"  
	                          		options="{'no_quick_create' : True, 'no_create':True, 'no_open': True}"/>
	                         	<field name="payment2rate" class="oe_inline"
	                         		attrs="{'required':  [('paymenttime2_id','!=', False)]}"/>
                          	</group>
                          	<group>
	                          	<field name="paymenttime3_id" class="oe_inline"  
	                          		options="{'no_quick_create' : True, 'no_create':True, 'no_open': True}"/>
	     						<field name="payment3rate"
	     							attrs="{'required':  [('paymenttime3_id','!=', False)]}"/>
	     						<field name="description"/>
     						</group>
       					</group>
       					<notebook>
       						<page string="Bonus Rate By Department">
       							<field name="bonus_rate_by_dept_ids" context="{'job_level_position_id' : job_level_position_id}"/>
       						</page>
	       					<page string="Logs">
		                        	<label string="*** Please press F5 to refresh the list of logs !" colspan="4"/>
			                        <field name="audit_log_ids" mode="tree"
			                               widget="one2many_list" readonly="1" nolabel="1" colspan="4">
			                            <tree version="7.0">
			                                <field name="timestamp" required="1" readonly="1"/>
			                                <field name="user_id" readonly="1"/>
			                                <field name="method" readonly="1"/>
			                                <field name="field_description"/>
			                                <field name="old_value_text"/>
			                                <field name="new_value_text"/>
			                            </tree>
			                        </field>
		                        </page>
		                 </notebook>
       				</sheet>
       			</form>
            </field>
        </record>

        <record id="view_vhr_erp_bonus_scheme_tree" model="ir.ui.view">
            <field name="name">vhr.erp.bonus.scheme.tree</field>
            <field name="model">vhr.erp.bonus.scheme</field>
            <field name="arch" type="xml">
                <tree string="ERP Setting" version="7.0">
                    <field name="job_family_id"/>
                    <field name="job_group_id"/>
                    <field name="job_level_position_id"/>
					<field name="erp_level_id"/>
                    <field name="total_bonus"/>
                    <field name="description"/>
                    <field name="payment1rate" invisible="1"/>
                    <field name="paymenttime1_id" invisible="1"/>
                 	<field name="payment2rate" invisible="1"/>
                    <field name="paymenttime2_id" invisible="1"/>
                    <field name="payment3rate" invisible="1"/>
                    <field name="paymenttime3_id" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="view_vhr_erp_bonus_scheme_search" model="ir.ui.view">
            <field name="name">vhr.erp.bonus.scheme.search</field>
            <field name="model">vhr.erp.bonus.scheme</field>
            <field name="arch" type="xml">
                <search>
	                <field name="job_family_id" string="Bonus Scheme" 
	        			 filter_domain="['|','|','|',('job_family_id','ilike',self),('job_group_id','ilike',self),('job_level_id','ilike',self),('total_bonus','ilike',self)]"/>
                	
                	<group expand="0" string="Group By">
                        <filter name="group_by_job_family_id" string="Job Family"
                               context="{'group_by':'job_family_id'}"/>
                        <filter name="group_by_job_group_id" string="Job Group"
                               context="{'group_by':'job_group_id'}"/>
                        <filter name="group_by_erp_level_id" string="ERP Level"
                               context="{'group_by':'erp_level_id'}"/>
                         <filter name="group_by_job_level_position_id" string="Job Level By Position"
                                context="{'group_by':'job_level_position_id'}"/>
                        <filter name="group_by_total_bonus" string="Total Bonus"
                               context="{'group_by':'total_bonus'}"/>
                    </group>
                    <group expand="0" string="Filter">
                       <filter string="Active = True" name="active_true" icon="terp-stage"
                            domain="[('active', '=', True)]"/>
	                    <filter string="Active = False" name="active_false" icon="STOCK_NEW"
	                            domain="[('active', '=', False)]"/>
	                     <filter string="Job family" name="job_family" icon="STOCK_NEW"
	                            domain="[('job_family_id', '='job_family_id )]"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="act_vhr_erp_bonus_scheme">
            <field name="name">ERP Bonus Scheme</field>
            <field name="res_model">vhr.erp.bonus.scheme</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_vhr_erp_bonus_scheme_tree"/>
            <field name="groups_id" eval=""/>
            <field name="search_view_id" ref="view_vhr_erp_bonus_scheme_search"/>
        </record>
    </data>
</openerp>