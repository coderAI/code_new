<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data noupdate='0'>
		<record id="view_vhr_cv_attachment_tree" model="ir.ui.view">
            <field name="name">vhr.cv.attachment.view.tree</field>
            <field name="model">ir.attachment</field>
            <field name="arch" type="xml">
                <tree string="Curriculum Vitaes" version="7.0" create="0">
                    <field name="name"/>
                    <field name="res_name"/>
                    <field name="is_main" string="Is Main"/>
                    <field name="create_date"/>
                    <field name="user_id" string="Update By"/>
                </tree>
            </field>
        </record>
        
        <record id="view_vhr_cv_attachment_form" model="ir.ui.view">
        <field name="name">vhr.cv.attachment.view.form</field>
            <field name="model">ir.attachment</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Attachments" create="0">
                   <sheet>
                    <label for="name" class="oe_edit_only"/>
                    <h1>
                        <field name="name"/>
                    </h1>
                    <group>
                        <group string="Data">
                        	<field name="res_name"/>
                            <field name="type"/>
                            <field name="datas" filename="datas_fname" attrs="{'invisible':[('type','=','url')]}"/>
                            <field name="datas_fname" invisible="1" attrs="{'invisible':[('type','=','url')]}" class="oe_inline oe_right"/>
                            <field name="url" widget="url" attrs="{'invisible':[('type','=','binary')]}"/>
                            <field name="is_main" string="Is Main"/>
                        </group>
                        <group>
                        </group>
                        <group string="History">
                            <label for="create_uid" string="Creation"/>
                            <div name="creation_div">
                                <field name="create_uid" readonly="1" class="oe_inline"/> on 
                                <field name="create_date" readonly="1" class="oe_inline"/>
                            </div>
                        </group>
                        <group name="description_group" string="Description" colspan="4">
                            <field name="description" nolabel="1"/>
                        </group>
                        <group name="index_content" string="CV content" colspan="4">
                            <field name="index_content" nolabel="1"/>
                        </group>
                    </group>
                  </sheet>
                </form>
            </field>
        </record>
        <record id="view_vhr_cv_attachment_search" model="ir.ui.view">
            <field name="model">ir.attachment</field>
            <field name="arch" type="xml">
                <search string="Attachments">
                    <field name="name" filter_domain="['|','|','|', ('name','ilike',self), ('datas_fname','ilike',self), ('res_name','ilike',self), ('user_id','ilike',self)]" string="Attachment"/>
                    <field name="index_content"/>
                     <group expand="0" string="Group By">
                        <filter string="Owner" icon="terp-personal" domain="[]" context="{'group_by':'create_uid'}"/>
                        <filter string="Type" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by':'type'}" groups="base.group_no_one"/>
                        <filter string="Creation Month" icon="terp-go-month" domain="[]" context="{'group_by':'create_date'}"/>
                    </group>
                     <group expand="0" string="Filter">
	                    <filter icon="terp-stock_align_left_24"
	                        string="Binary"
	                        domain="[('type','=','binary')]"/>
	                    <separator/>
	                    <filter name="my_documents_filter" 
	                        string="My Document(s)"
	                        icon="terp-personal"
	                        domain="[('create_uid','=',uid)]"
	                        help="Filter on my documents"/>
	                    <filter name="is_main_filter" 
	                        string="Is main"
	                        icon="terp-personal"
	                        domain="[('is_main','=',True)]"
	                        help="Filter on is main"/>
	                 </group>                   
                </search>
            </field>
        </record>
        <record model="ir.actions.act_window" id="action_vhr_cv_attachment">
            <field name="name">Curriculum Vitae</field>
            <field name="res_model">ir.attachment</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_vhr_cv_attachment_tree"/>
            <field name="search_view_id" ref="view_vhr_cv_attachment_search"/>
            <field name="domain">['|',('res_model','=','hr.applicant'),('res_model','=','vhr.temp.applicant')]</field>
            <field name="help" type="html">
	            <p>
	             Search through resumes and motivation letters.
	            </p>
            </field>
        </record>
        <record id="action_vhr_cv_attachment_tree" model="ir.actions.act_window.view">
            <field name="sequence">1</field>
            <field name="view_id" ref="view_vhr_cv_attachment_tree"/>
            <field name="act_window_id" ref="action_vhr_cv_attachment"/>
            <field name="view_mode">tree</field>
        </record>

        <record id="action_vhr_cv_attachment_form" model="ir.actions.act_window.view">
            <field name="sequence">2</field>
            <field name="view_id" ref="view_vhr_cv_attachment_form"/>
            <field name="act_window_id" ref="action_vhr_cv_attachment"/>
            <field name="view_mode">form</field>
        </record>
	</data>
</openerp>