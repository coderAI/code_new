<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data noupdate='0'>
		<!-- view when click button -->
		<record id="view_vhr_job_submit_form" model="ir.ui.view">
			<field name="name">vhr.job.submit.form</field>
			<field name="model">hr.job</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Note" version="7.0">
					<label for="reason_close_id" string="Reason :" colspan="4"
						invisible="0 if context.get('ACTION','') in ['in_progress_cancel', 'in_progress_close'] else 1" />
					<field name="reason_close_id" colspan="4"
						invisible="0 if context.get('ACTION','') in ['in_progress_cancel', 'in_progress_close'] else 1"
						required="1 if context.get('ACTION','') in ['in_progress_cancel', 'in_progress_close'] else 0"
						options="{'no_quick_create' : True, 'no_create':True, 'no_open': True}" />
					<separator string="Comment" colspan="4"
						required="context.get('required_comment',False)" />
					<footer>
						<button one_click_button="True" name="execute_workflow"
							string="Submit" type="object" icon="gtk-save" class="oe_highlight"
							context="{'ACTION_COMMENT': action_comment}" />
						or
						<button string="Cancel" class="oe_link" special="cancel" />
					</footer>
				</form>
			</field>
		</record>

		<!-- view full -->
        <record id="view_vhr_resource_request_form" model="ir.ui.view">
            <field name="name">vhr.resource.request.view.form</field>
            <field name="model">hr.job</field>
            <field name="inherit_id" ref="hr.view_hr_job_form"/>
            <field name="arch" type="xml">
                <form position="replace">
                    <form string="Resource Request">
                        <header>
                            <field name="state" widget="statusbar"
                                   statusbar_visible="draft,waiting_hrbp,waiting_dept,waiting_rrm,reject,in_progress,done,close,cancel"/>
                        </header>
                        <sheet>
                        	<label for="code_func" class="oe_edit_only"/>
                            <h2>
                                <field name="code_func" readonly="1"/>
                                <field name="code" invisible="1"/>
                            </h2>
                            <div class="oe_right" name="buttons">
                                <div class="oe_button_box">                
                                            
                                    <button class="oe_stat_button bg_icon_green" string="Submit" name="action_open_window_ex"  
                                    		states="draft" icon="fa-mail-forward" type="object" style="width:100px !important"
                                            context="{'ACTION':'draft_waiting_hrbp','ACTION_TYPE':'WORKFLOW',
                                            		'VIEW_ID':'vhr_recruitment.view_vhr_job_submit_form','VIEW_NAME':'Notes'}"/>

                                    <button class="oe_stat_button bg_icon_green" string="Submit" name="action_open_window_ex"
                                    		my_request="False" icon="fa-mail-forward" type="object" 
                                    		attrs="{'invisible': ['|','|','|','|','|','|',
                                    							('state','!=','waiting_hrbp'),
                                    							('none_official','=',True),
                                          						('is_hrbp','!=', True),
                                          						('request_job_type_code', '!=', 'OFFICIAL'),('is_reject_rrm', '=', True)]}"
                                            help="Send to depthead approve"  style="width:100px !important"
                                            context="{'ACTION':'waiting_hrbp_waiting_dept','ACTION_TYPE':'WORKFLOW',
                                            		'VIEW_ID':'vhr_recruitment.view_vhr_job_submit_form','VIEW_NAME':'Notes'}"/>
                                            
                                    <button class="oe_stat_button bg_icon_green" string="Submit" name="action_open_window_ex"
                                    		my_request="False" icon="fa-mail-forward" type="object" style="width:100px !important"
                                    		attrs="{'invisible': ['|','|','|',
                                    							('state','!=','waiting_hrbp'),
                                    							('is_hrbp','!=', True),
                                    							'&amp;', ('request_job_type_code', '=', 'OFFICIAL'), ('none_official','=',False),('is_reject_rrm', '=', True)]}"
                                            help="Send to RRM approve (depthead approved or None office or Intern/Fresher/Colla...)"
                                            context="{'ACTION':'waiting_hrbp_waiting_rrm','ACTION_TYPE':'WORKFLOW',
                                            		'VIEW_ID':'vhr_recruitment.view_vhr_job_submit_form','VIEW_NAME':'Notes'}"/>
                                            		
                                      
                                     <button class="oe_stat_button bg_icon_green" string="Submit" name="action_open_window_ex"
                                    		my_request="False" icon="fa-mail-forward" type="object" style="width:100px !important"
                                    		attrs="{'invisible': ['|','|','|',
                                    							('state','!=','waiting_hrbp'),
                                    							('is_hrbp','!=', True),
                                    							('is_reject_rrm', '=', False)]}"
                                            help="Send to RRM approve (depthead approved or None office or Intern/Fresher/Colla...)"
                                            context="{'ACTION':'waiting_hrbp_waiting_rrm','ACTION_TYPE':'WORKFLOW',
                                            		'VIEW_ID':'vhr_recruitment.view_vhr_job_submit_form','VIEW_NAME':'Notes'}"/>
                                            		
                                    <button class="oe_stat_button bg_icon_red" string="Reject" name="action_open_window_ex"
                                    		my_request="False" icon="fa-times" type="object" 
                                    		save_no_required='True'
                                    		attrs="{'invisible': ['|',('state','!=','waiting_hrbp'),('is_hrbp','!=', True)]}"
                                    		help="HRBP Reject" style="width:100px !important"
                                            context="{'ACTION':'waiting_hrbp_draft', 'required_comment':True,'ACTION_TYPE':'WORKFLOW',
                                            		'VIEW_ID':'vhr_recruitment.view_vhr_job_submit_form','VIEW_NAME':'Notes'}"/>

                                    <button class="oe_stat_button bg_icon_green" string="Submit" name="action_open_window_ex"
                                    		my_request='False'  icon="fa-mail-forward" type="object"  style="width:100px !important"
                                    		attrs="{'invisible': ['|','&amp;',('is_depthead','=',False),('is_depthead_delegate','=',False),('state','!=','waiting_dept')]}"
                                    		context="{'ACTION':'waiting_dept_waiting_rrm','ACTION_TYPE':'WORKFLOW',
                                            		'VIEW_ID':'vhr_recruitment.view_vhr_job_submit_form','VIEW_NAME':'Notes'}"/>
                                            
                                    <button class="oe_stat_button bg_icon_red" string="Reject" name="action_open_window_ex"
                                    		my_request="False" icon="fa-times" type="object" 
                                    		attrs="{'invisible': ['|','&amp;',('is_depthead','=',False),('is_depthead_delegate','=',False),('state','!=','waiting_dept')]}"
                                    		save_no_required='True'  style="width:100px !important"
                                            context="{'ACTION':'waiting_dept_waiting_hrbp','required_comment':True,'ACTION_TYPE':'WORKFLOW',
                                            		'VIEW_ID':'vhr_recruitment.view_vhr_job_submit_form','VIEW_NAME':'Notes'}"/>

                                    <button class="oe_stat_button bg_icon_green" string="Submit" name="action_open_window_ex"
                                    		my_request="False" icon="fa-mail-forward" type="object" 
                                    		groups="vhr_recruitment.vhr_recruitment_manager,vhr_recruitment.vhr_recruitment_admin"
                                    		states="waiting_rrm" style="width:100px !important"
                                            context="{'ACTION':'waiting_rrm_in_progress','ACTION_TYPE':'WORKFLOW',
                                            		'VIEW_ID':'vhr_recruitment.view_vhr_job_submit_form','VIEW_NAME':'Notes'}"/>
                                            
                                    <button class="oe_stat_button bg_icon_red" string="Reject" name="action_open_window_ex"
                                    		my_request="False" icon="fa-times" type="object"  style="width:100px !important"
                                    		groups="vhr_recruitment.vhr_recruitment_manager,vhr_recruitment.vhr_recruitment_admin"
                                    		save_no_required='True' help="Return HRBP" states="waiting_rrm"
                                            context="{'ACTION':'waiting_rrm_waiting_hrbp', 'required_comment':True,'ACTION_TYPE':'WORKFLOW',
                                            		'VIEW_ID':'vhr_recruitment.view_vhr_job_submit_form','VIEW_NAME':'Notes'}"/>
									
									<button class="oe_stat_button bg_icon_green"  string="Post Job" name="action_open_window_ex"
                                    		my_request="False" code_execute="POST_JOB" icon="fa-sun-o" type="object"
                                    		groups="vhr_recruitment.vhr_recruiter" style="width:100px !important"
                                            states="in_progress,done"
                                            context="{'ACTION_TYPE':'POST_JOB','VIEW_ID':'vhr_recruitment.view_vhr_post_job_form','VIEW_NAME':'Post Job',
                                            		  'TARGET':'current','MODEL': 'vhr.post.job','code': code,'description':description,'requirement':requirements,
                                            		  'preference':preference,'description_en':description_en,'requirement_en':requirement_en,
                                            		  'preference_en':preference_en,'office_id':office_id, 'job_title_id': job_title_id}"/>
                                   	
                                   	<button class="oe_stat_button bg_icon_green" string="Match CV" name="action_open_window_ex"
                                    		my_request="False" code_execute="MATCHCV" icon="fa-search" type="object"
                                    		groups="vhr_recruitment.vhr_recruiter" style="width:108px !important"
                                            attrs="{'invisible':['|',('show_finish_button','=','DONE'),('state','!=','in_progress')]}"
                                            pop_up_select="True"/>
                                    
                                    <button class="oe_stat_button bg_icon_orange" string="Send CVs" name="action_open_window_ex"
                                    		my_request="False" code_execute="SENDCV" icon="fa-mail-forward" type="object"
                                    		groups="vhr_recruitment.vhr_recruiter" style="width:110px !important"
                                            attrs="{'invisible':['|','|',('show_finish_button','=','DONE'),('state','!=','in_progress'),('is_show_send_cv','=',False)]}"
                                            context="{'ACTION_TYPE':'SEND_CV','VIEW_ID':'vhr_recruitment.view_vhr_rr_send_multi_cvs_hr_job',
                                          			 'VIEW_NAME':'Send Candidates', 'MODEL':'vhr.send.multi.cvs'}"/>
                                     
									 <button class="oe_stat_button bg_icon_orange" string="Send Survey" name="action_open_window_ex"
                                    		my_request="False" code_execute="SENDSURVEY" icon="fa-mail-forward" type="object"
                                    		groups="vhr_recruitment.vhr_recruiter" style="width:110px !important"
                                            attrs="{'invisible':['|',('state','!=','done'),('is_send_survey','=',True)]}"
                                            context="{'ACTION_TYPE':'SEND_SURVEY','VIEW_ID':'vhr_recruitment.view_vhr_rr_survey',
                                          			 'VIEW_NAME':'Send Survey', 'MODEL':'vhr.recruitment.survey'}"/>
									
                                    <button class="oe_stat_button bg_icon_green" string="Done" name="action_open_window_ex"
                                    		my_request="False" code_execute="DONE_INPROGRESS" icon="fa-check-circle" type="object" 
                                    		groups="vhr_recruitment.vhr_recruiter"
                                            attrs="{'invisible':['|',('show_finish_button','!=','DONE'),('state','!=','in_progress')]}"
                                            help="Done" style="width:90px !important"
                                            context="{'ACTION':'in_progress_done','ACTION_TYPE':'WORKFLOW',
                                            		'VIEW_ID':'vhr_recruitment.view_vhr_job_submit_form','VIEW_NAME':'Notes'}"/>
                                            
                                    <button class="oe_stat_button bg_icon_red" string="Close" name="action_open_window_ex"
                                    		my_request="False" code_execute="CANCEL_INPROGRESS" icon="fa-times" type="object" 
                                    		groups="vhr_recruitment.vhr_recruiter"                                       
                                            attrs="{'invisible':['|',('show_finish_button','!=', 'CANCEL'),('state','!=','in_progress')]}"
                                            help="Cancel Resource Request" style="width:85px !important"
                                            context="{'ACTION':'in_progress_cancel', 'required_comment':True,'ACTION_TYPE':'WORKFLOW',
                                            		'VIEW_ID':'vhr_recruitment.view_vhr_job_submit_form','VIEW_NAME':'Notes'}"/>
                                            
                                    <button class="oe_stat_button bg_icon_red" string="Close" name="action_open_window_ex"
                                    		my_request="False" code_execute="CLOSE_INPROGRESS" icon="fa-times" type="object" 
                                    		groups="vhr_recruitment.vhr_recruiter"
                                            attrs="{'invisible':['|',('show_finish_button','!=','CLOSE'),('state','!=','in_progress')]}"
                                            help="Close Resource Request" style="width:85px !important"
                                            context="{'ACTION':'in_progress_close', 'required_comment':True,'ACTION_TYPE':'WORKFLOW',
                                            		'VIEW_ID':'vhr_recruitment.view_vhr_job_submit_form','VIEW_NAME':'Notes'}"/>
                                    
                                    <button class="oe_stat_button bg_icon_red" string="Re open" name="action_open_window_ex"
                                    		my_request="False" code_execute="REOPEN" icon="fa-times" type="object" 
                                    		groups="vhr_recruitment.vhr_recruiter"
                                           	states="done" style="width:90px !important"
                                            help="Reopen Resource Request"
                                            context="{'ACTION':'done_in_progress', 'required_comment':True,'ACTION_TYPE':'WORKFLOW',
                                            		  'VIEW_ID':'vhr_recruitment.view_vhr_job_submit_form','VIEW_NAME':'Notes'}"/>
                                    <br/>
                                </div>
                            </div>
                            <group name="General">
                                <separator string="General Information" colspan="4"/>
                                <group name="General Left">
                                    <field name="requestor_company_id" required='1' string="Requester Company*"
                                           options="{'no_quick_create' : True, 'no_create':True, 'no_open': True ,'save_readonly' : True}"
                                           attrs="{'readonly':  [('state','not in', ['draft'])]}"
                                           on_change="onchange_requestor(requestor_company_id, requestor_id)"/>

                                    <field name="requestor_id" required='1'  string="Requester*"
                                           options="{'save_readonly' : True, 'no_quick_create' : True, 'no_create':True, 'no_open': True}"
                                           attrs="{'readonly':  [('state','not in', ['draft'])]}"
                                   		   context="{'tree_view_ref':'vhr_human_resource.view_vhr_human_resource_mimimal_employee_tree'}" 
                                           on_change="onchange_requestor(requestor_company_id, requestor_id)"/>

                                    <field name="request_date" required='1'  string="Request date*" readonly="1" invisible="1"
                                    	   on_change="onchange_date(request_date, expected_date)"
                                           attrs="{'readonly':  [('state','not in', ['draft'])]}"
                                            options="{'save_readonly' : True}"/>
                                            
                                     <field name="rrm_approve_date" string="RRM Approve*" readonly="1" options="{'save_readonly' : True}"/>/>
                                     
                                    <field name="expected_date"  on_change="onchange_date(request_date, expected_date)"
                                           attrs="{'readonly':  [('state','not in', ['draft'])]}"/>
                                    <field name="dept_head_delay" attrs="{'readonly':  [('state','not in', ['in_progress'])]}"
                                    	groups="vhr_recruitment.vhr_recruiter"/>
                                    <field name="reason_delay" attrs="{'readonly': [('state','not in', ['in_progress'])],
                                    								   'invisible': [('dept_head_delay','in', [False,0,''])],
                                    								   'required': ['&amp;',('state','in', ['in_progress']),('dept_head_delay','not in', [False,0,''])]}"
                                    	groups="vhr_recruitment.vhr_recruiter"/>
                                    <field name="is_show_dh_approve" invisible="1"/>
                                    <field name="show_finish_button" invisible="1"/>
                                    <field name="is_depthead" invisible="1"/>
                                    <field name="is_change_headcount" invisible="1" options="{'save_readonly' : True}"/>
                                    <field name="is_depthead_delegate" invisible="1"/>
                                    <field name="is_show_send_cv" invisible="1"/>
                                    <field name="is_hrbp" invisible="1"/>
                                    <field name="is_reject_rrm" invisible="1"/>
                                    <field name="is_send_survey" invisible="1"/>
                                </group>
                                <group name="General Right">
                                    <field name="requestor_dept" readonly="1"
                                           options="{'no_quick_create' : True, 'save_readonly' : True, 'no_open': True}"/>
                                    <field name="requestor_dev" readonly="1" string="Business Unit"
                                           options="{'no_quick_create' : True, 'save_readonly' : True, 'no_open': True}"/>
                                    <field name="requestor_role" readonly="1"
                                            options="{'no_quick_create' : True, 'save_readonly' : True, 'no_open': True}"/>
                                    <field name="request_job_type"
                                    		options="{'no_quick_create' : True, 'no_create':True, 'no_open': True}"
                                    		attrs="{'required': [('state','in', ('draft', 'waiting_hrbp'))],
                                    				'readonly': ['|',('state','not in', ('draft', 'waiting_hrbp')),
                                    							'&amp;',('state', '=', 'waiting_hrbp'), ('is_hrbp','!=', True),]}"
                                    		on_change="on_change_request_job_type(request_job_type)"
                                    		context="{'dimension_type':'RR_REQUEST_TYPE'}"/>
                                    <field name="request_job_type_code" invisible="1" readonly='1'/>
                                    <field name="none_official" class="hrs_color_warning_lb"
                                           attrs="{'readonly':  [('state','!=','draft')], 'invisible': ['|', ('request_job_type_code','!=', 'OFFICIAL'), '&amp;',('is_depthead','=', False),('is_depthead_delegate','=', False)]}"/>
                                    <field name="no_depthead_approval" class="hrs_color_warning_lb"
                                    	   options="{'save_readonly' : True}"
                                           attrs="{'invisible':  [('none_official','=',False)], 'readonly': ['|','&amp;',('is_depthead','=',False),('is_depthead_delegate','=', False),('no_depthead_approval','=',True)]}"/>
                                    <field name="reason_close_id" invisible="1"/>
                                   	<field name="reason_content" attrs="{'invisible':[('reason_close_id','=', False)]}" readonly="1"/>
                                </group>
                            </group>
                            <notebook colspan="6">
                                <page string="Recruitment Information(*)">
                                    <group name="Recruitment Information">
                                        <group>
                                            <field name="company" required='1' string="Request for company*"
                                            		options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_no_required': True}"
                                                   	attrs="{'readonly':  [('state','not in', ['draft'])]}"
                                           	        on_change="on_change_request_for_company(company)"/>
                                            <field name="job_title_id" required='1'  string="Title/Role*"
                                            		options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_no_required': True}"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"/>
                                            <field name="job_level_id" string="Level"
                                            		options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_no_required': True}"
                                                    attrs="{'readonly':  [('state','not in', ['draft'])], 'invisible': True}"/>
                                            
                                            <!-- BinhNX: remove required and onchange for sub_group_id field -->
                                             <!-- <field name="sub_group_id" required="1" string="Sub Group*"
                                             	   options="{'no_quick_create' : True, 'no_create':True, 'no_open': True}"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"
                                                   on_change="onchange_sub_group_id(sub_group_id)"/>
                                            
                                            <field name="job_group_id" readonly='1' options="{'no_open': True}"/>
                                            <field name="job_family_id" readonly='1' options="{'no_open': True}"/> -->
                                            <field name="career_track_id" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True, 'save_no_required': True}" 
                                                attrs="{'readonly': [('state','not in', ['draft','waiting_hrbp'])],
                                           	    'invisible': [('request_job_type_code','!=', 'OFFICIAL')],
                                           		'required': [('state','in', ['waiting_hrbp']),('request_job_type_code','=', 'OFFICIAL')]}"/> 
                                                         	
                                            <field name="job_family_id" 
                                                on_change="onchange_job_family_id(job_family_id,job_group_id,context)" 
                                                options="{'no_quick_create' : True, 'no_create':True, 'no_open': True, 'save_no_required': True}" 
                                                attrs="{'readonly': ['|',('state','not in', ('draft', 'waiting_hrbp')), 
                                                                         '&amp;',('state', '=', 'waiting_hrbp'), ('is_hrbp','!=', True),], 
                                                        'required': [('state','in', ['waiting_hrbp'])]}"/> 
                                                        	
                                            <field name="job_group_id" context="{'filter_by_job_family_id' : job_family_id}" 
                                            	  on_change="onchange_job_group_id(job_group_id,sub_group_id)"
                                                  options="{'no_quick_create' : True, 'no_create':True, 'no_open': True, 'save_no_required': True}" 
                                                  attrs="{'readonly': ['|',('state','not in', ('draft', 'waiting_hrbp')), 
                                                                     	'&amp;',('state', '=', 'waiting_hrbp'), ('is_hrbp','!=', True),], 
                                                        	'required': [('state','in', ['waiting_hrbp'])]}"/> 
                                                        		
                                           	<field name="sub_group_id" string="Sub Group" 
                                           	context="{'filter_by_job_group_id' : job_group_id}" 
                                           	options="{'no_quick_create' : True, 'no_create':True, 'no_open': True, 'save_no_required': True}" 
                                           	attrs="{'readonly': ['|',('state','not in', ('draft', 'waiting_hrbp')), 
                                           	                    	'&amp;',('state', '=', 'waiting_hrbp'), ('is_hrbp','!=', True),],
                                           	        'required': [('state','in', ['waiting_hrbp'])]}"/> 
                                           	        	
                                           	<field name="job_level_position_id" string="Person Level" 
                                           	options="{'no_quick_create' : True, 'no_create':True, 'no_open': True, 'save_no_required': True}" 
                                           	attrs="{'readonly': [('state','not in', ['draft','waiting_hrbp'])],
                                           	    'invisible': [('request_job_type_code','!=', 'OFFICIAL')],
                                           		'required': [('state','in', ['waiting_hrbp']),('request_job_type_code','=', 'OFFICIAL')]}"/>   
                                            
                                            <field name="no_of_recruitment" required='1' string="Request Quantity*"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"
                                                   on_change="onchange_no_recruitment_ex(no_of_recruitment)" options="{'save_no_required': True}" />
                                            <field name="change_headcount_comment" string="Reason change*" readonly="1"
                                                   attrs="{'invisible': [('is_change_headcount','=',False)]}"/>
                                                   
                                            <field name="report_to" required='1' string="Report To*" on_change= "onchange_report_to_department(report_to,department_id)"
                                                  context="{'tree_view_ref':'vhr_human_resource.view_vhr_human_resource_mimimal_employee_tree'}" 
                                            	  options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_no_required': True}"
                                                  attrs="{'readonly':  [('state','not in', ['draft'])]}"/>

                                        </group>
                                        <group>
                                            <field name="department_id" string="Request for department*" required='1' on_change="onchange_report_to_department(report_to,department_id)" 
                                                   options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_no_required': True}"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"/>
                                            <field name="gender" required='1' string="Gender*"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"/>
                                            <field name="degree_id" required='1'  string="Education Level*"
                                            	   options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_no_required': True}"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"/>
                                            <field name="reason_id" required='1' options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_no_required': True}" string="Reason*"
                                            	    on_change="on_change_reason(reason_id)" 
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"/>
                                            <field name="reason_code" invisible="1" readonly="1"/>
                                            <field name="reason_emp" string="For employee*" widget="many2many_tags"
                                            	   context="{'active_test':False}" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_no_required': True}"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])], 
                                                   		   'invisible':[('reason_code','not in',['REPLACE','STAFF_MOVEMENT'])],
                                                   		   'required': [('reason_code','in',['REPLACE','STAFF_MOVEMENT'])]
                                                   		   }"/>
                                                   
                                            <field name="office_id" required='1'  string="Working Place*"
                                                   options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_no_required': True}"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"/>
                                            <field name="no_of_hired_recruitment" readonly="1"
                                                   attrs="{'invisible':  [('state','in', ['draft'])]}"/>
                                            <field name="job_type_id" required='1' 
                                            	   string="Job Type*"
                                            	   options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_no_required': True}"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"
                                                   context="{'dimension_type':'JOB_TYPE'}"/>
                                            
                                        </group>
                                    </group>
                                    <group string="HRBP Approve Information"
                                           attrs="{'invisible':  [('state','=', 'draft')]}">
                                        <group>
                                            <field name="current_headcount_official" readonly="1"/>
                                            <field name="in_budget" readonly="1" class="hrs_color_warning_lb" options="{'save_no_required': True}"/>
                                          <!--  <field name="position_class_standard_ex"  string="Position class standard*"
                                                   readonly="1" widget="many2many_tags"
                                                   options="{'save_no_required': True,'no_quick_create' : True, 'no_create':True, 'no_open': True, 'save_readonly' : True}"/>-->
                                        </group>
                                        <group>
                                            <field name="current_headcount_collaborators" readonly="1"/>
                                             <field name="priority_1" class="oe_inline" string="Priority 1*"
                                             	readonly="1" options="{'save_readonly' : True, 'integer_number': True}"/>
                                             <field name="priority_2" class="oe_inline" string="Priority 2*"
                                             	readonly="1" options="{'save_readonly' : True, 'integer_number': True}"/>
                                             <field name="priority_3" class="oe_inline" string="Priority 3*"
                                             	readonly="1" options="{'save_readonly' : True, 'integer_number': True}"/>
                                        </group>
                                    </group>
                                    <group string="RRM Approve Information"
                                           attrs="{'invisible':  ['&amp;',('handle_by','=', False),('state','in',['draft','waiting_hrbp','waiting_dept'])]}">
                                        <group>
                                            <field name="handle_by" class="oe_inline hrs_color_warning_lb"  string="Handle By*" readonly="1"
                                                context="{'tree_view_ref':'vhr_human_resource.view_vhr_human_resource_mimimal_employee_tree'}" 
                                            	options="{'no_quick_create' : True, 'no_create':True, 'no_open': True, 'save_no_required': True}"/>  
                                           	<field name="share_handle_by" class="oe_inline hrs_color_warning_lb"  string="Share Handle By" readonly="1"
                                           		context="{'tree_view_ref':'vhr_human_resource.view_vhr_human_resource_mimimal_employee_tree'}" 
                                           	    options="{'no_quick_create' : True, 'no_create':True, 'no_open': True, 'save_no_required': True}"/> 
                                           	 <field name="is_specialerp" on_change="on_change_is_specialerp(is_specialerp)"/>
                                           	 <field name="is_bonus_recruiter" on_change="on_change_is_bonus_recruiter(is_bonus_recruiter)"/> 
                                        </group>
                                        <group>
                                        	<field name="business_impact_id" class="oe_inline hrs_color_warning_lb" readonly="1"
                                            	options="{'no_quick_create' : True, 'no_create':True, 'no_open': True, 'save_no_required': True}"/>
                                        	<!-- <field name="business_impact_id" class="oe_inline"
                                        			attrs="{'required': [('state','in',['waiting_rrm'])],
                                        					'readonly': [('state','not in',['waiting_rrm'])]}"
                                            		options="{'no_quick_create': True, 'no_create': True, 'no_open': True,}"/> -->
                                            <field name="is_critical" class="oe_inline" readonly="1"/>
                                        </group>
                                    </group>

                                </page>
                                <page string="Detail Information(*)">
                                    <label for="categ_ids" string="Skills"/>
                                    <field name="categ_ids" widget="many2many_tags" attrs="{'readonly':  [('state','not in', ['draft'])]}"/>
                                    <group name="Detail Information">
                                        <group col='1'>
                                            <field name="description" string="Mô tả"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"
                                                   widget="html"/>
                                            <field name="requirements" string="Yêu cầu"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"
                                                   widget="html"/>
                                            <field name="preference" string="Ưu tiên" 
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"
                                                   widget="html"/>
                                        </group>
                                        <group col='1'>
                                            <field name="description_en"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"
                                                   widget="html"/>
                                            <field name="requirement_en"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"
                                                   widget="html"/>
                                            <field name="preference_en"
                                                   attrs="{'readonly':  [('state','not in', ['draft'])]}"
                                                   widget="html"/>
                                        </group>
                                    </group>
                                </page>
                                <page string="Match CV"
                                      attrs="{'invisible': [('state','not in',['in_progress','done','close','cancel'])]}">
                                    <field name="job_applicant_ids"
                                           context="{'form_view_ref': 'vhr_recruitment.view_vhr_job_applicant_form'}">
                                        <tree string="Task List" create="false">
                                            <field name="applicant_id" string="Candidate Name"/>
                                            <field name="birthday_app"/>
                                            <field name="gender_app"/>
                                            <field name="email"/>
                                            <field name="mobile"/>
                                            <field name="source_type_id_app"/>
                                            <field name="source_id_app"/>
                                            <field name="current_row"/>
                                            <field name="is_keep_in_view"/>
                                            <field name="state"/>
                                        </tree>
                                    </field>
                                </page>
                                <!-- <page string="Log state changes">
                                    <field name="state_change_ids" readonly="1"/>
                                </page> -->
                                 <page string="Special ERP"
                                      attrs="{'invisible': [('is_specialerp','=',False)]}">
                                    <field name="special_erp_ids" nolabel="1" widget="one2many_list" options="{'create':false}">
	                                    <tree string="Special ERP" editable="1" create="0" delete="0" version="7.0">
	                                     	<field name="job_family_id" readonly="1" invisible="1"/>
		                                    <field name="job_level_position_id" readonly="1"/>
		                                    <field name="erp_level_id" readonly="1"/>
		                                    <field name="total_bonus" readonly="1"/>
		                                    <field name="total_bonus_specialerp" required='1'/>
		                                    <!-- <field name="bonus_for_recruiter"/> -->
	                                    </tree>
                                  </field>
                                  </page>
                                  
                                  <!-- Bonus for RECRUITER -->
                                  <page string="Bonus For Recruiter"
                                      attrs="{'invisible': [('is_bonus_recruiter','=',False)]}">
                                    <field name="bonus_recruiter_ids" nolabel="1" widget="one2many_list" options="{'create':false}">
	                                    <tree string="Bonus for Recruiter" editable="1" create="0" delete="0" version="7.0">
		                                    <field name="job_level_position_id" readonly="1"/>
		                                    <field name="erp_level_id" readonly="1"/>
		                                    <field name="bonus_for_recruiter"/>
		                                    <field name="note"/>
	                                    </tree>
                                  </field>
                                  </page>
                                  
	       						<page string="Approved Log">
	       							<field name="state_log_ids" mode="tree" widget="one2many_list" readonly="1">
	       								<tree version="7.0">
	       									<field name="create_date" readonly="1"/>
	       									<field name="create_uid" readonly="1"/>
	       									<field name="old_state" readonly="1" string="Status"/>
	       									<field name="new_state" readonly="1" invisible="1"/>
	       									<field name="comment" readonly="1"/>
	       								</tree>
	       							</field>
	       						</page>	
	       						<page string="Logs" groups="vhr_recruitment.vhr_recruitment_admin">
	       							<label string="*** Please press F5 to refresh the list of logs !" colspan="4"/>	
	       							<field name="audit_log_ids" mode="tree"
	                       		 		widget="one2many_list" readonly="1">
		       							<tree version="7.0">
		       								<field name="timestamp" required="1" readonly="1"/>
					                        <field name="user_id" readonly="1"/>
					                        <field name="method" readonly="1"/>
					                        <field name="field_description"/>
	                            			<field name="old_value_text"/>
	                            			<field name="new_value_text"/>
		       							</tree>
		       						</field>	
	       						</page>	
                            </notebook>
                        </sheet>
                       <!--  <div class="oe_chatter">
                            <field name="message_follower_ids" widget="mail_followers"/>
                            <field name="message_ids" widget="mail_thread"/>
                        </div> -->
                    </form>
                </form>
            </field>
        </record>

        <record id="view_vhr_resource_request_tree" model="ir.ui.view">
            <field name="name">vhr.resource.request.view.tree</field>
            <field name="model">hr.job</field>
            <field name="arch" type="xml">
                <tree string="Resource Request" version="7.0" colors="red:business_impact=='1'" default_order="state desc, request_date desc, request_job_type desc, id desc">
                    <field name="code_func_tree"/>
                    <field name="requestor_id"/>
                    <field name="job_title_id"/>
                    <field name="job_level_id" invisible="1"/>
                    <field name="job_level_position_id"/>
                    <field name="request_date" invisible="1"/>
                    <field name="rrm_approve_date"/>
                    <field name="no_of_recruitment" string="No of request"/>
                    <field name="no_of_hired_recruitment" string="No of recruited"/>
                    <field name="no_of_remain_recruitment" string="Remain"/>
                    <field name="report_to"/>
                    <field name="office_id"/>
                    <field name="job_type_id"/>
                    <field name="handle_by"/>
                    <field name="state"/>
                    <field name="business_impact" invisible="1"/>
                    <field name="request_job_type" invisible="1" context="{'dimension_type':'RR_REQUEST_TYPE'}"/>
                	<field name="is_reject_rrm" invisible="1"/>
                </tree>
            </field>
        </record>
		
		<record id="view_vhr_resource_request_search" model="ir.ui.view">
            <field name="name">vhr.resource.request.view.tree</field>
            <field name="model">hr.job</field>
            <field name="groups_id" eval=""/>
            <field name="arch" type="xml">
                <search string="Resource Request">
                    <field name="code"/>
                    <field name="requestor_id"/>
                    <field name="job_level_id" invisible="1"/>
                    <field name="job_level_position_id"/>
                    <field name="requestor_id" invisible="1"/>
                    <field name="department_code"/>
                    <field name="job_title_id" invisible="1"/>
                    <field name="job_title_name"/>
                    <separator/>                    
                   <group expand="0" string="Group By">
                   
<!-- 	                 <filter name="group_by_request_date" string="Request date" -->
<!-- 	                               context="{'group_by':'request_date'}"/> -->
	                   
<!-- 	                 <filter name="group_by_rrm_approve_date" string="RRM Approve" -->
<!-- 	                               context="{'group_by':'rrm_approve_date'}"/> -->
	                               
	                 <filter name="group_by_state" string="Status"
	                               context="{'group_by':'state'}"/>
                     <filter name="group_by_department" string="Department"
                               context="{'group_by':'department_id'}"/>
                     <filter name="group_by_title" string="Title"
                               context="{'group_by':'job_title_id'}"/>
                     <filter name="group_by_level_position" string="Person Level"
                               context="{'group_by':'job_level_position_id'}"/>
                     <filter name="group_by_request_type" string="Request Type"
                               context="{'group_by':'request_job_type'}"/>
                     <filter name="group_by_handle" string="Handle By"
                               context="{'group_by':'handle_by'}"/>
                   </group>
                    <group expand="0" string="Filter">
                       <filter name="filter_draft" string="Draft"
                               domain="[('state', '=', 'draft')]"/>
                       <filter name="filter_waiting" string="Waiting"
                               domain="[('state', 'in', ['waiting_hrbp', 'waiting_dept', 'waiting_rrm'])]"/>
                       <filter name="filter_in_progress" string="In progress"
                               domain="[('state', '=', 'in_progress')]"/>
                       <filter name="filter_done" string="Done"
                               domain="[('state', '=', 'done')]"/>
                       <filter name="filter_in_budget" string="In budget"
                               domain="[('in_budget', '=', True)]"/>
                       <filter name="filter_my_task" string="My handle" groups="vhr_recruitment.vhr_recruiter"
                               domain="['|',('handle_by.user_id', '=', uid), ('share_handle_by.user_id', '=', uid)]"/>
                   </group>                   
                </search>
            </field>
        </record>
        <!-- My requests -->
        <record model="ir.actions.act_window" id="action_vhr_resource_request">
            <field name="name">Resource Request</field>
            <field name="res_model">hr.job</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_vhr_resource_request_tree"/>
            <field name="context">{'REQUEST':'ADMIN','search_default_filter_waiting': 1, 'search_default_filter_in_progress': 1, 'rule_for_tree_form':True, 'create': False}</field>
            <field name="search_view_id" ref="view_vhr_resource_request_search"/>
        </record>

        <record id="action_view_vhr_resource_request_tree" model="ir.actions.act_window.view">
            <field name="sequence">1</field>
            <field name="view_id" ref="view_vhr_resource_request_tree"/>
            <field name="act_window_id" ref="action_vhr_resource_request"/>
            <field name="view_mode">tree</field>
        </record>

        <record id="action_view_vhr_resource_request_form" model="ir.actions.act_window.view">
            <field name="sequence">2</field>
            <field name="view_id" ref="view_vhr_resource_request_form"/>
            <field name="act_window_id" ref="action_vhr_resource_request"/>
            <field name="view_mode">form</field>
        </record>

        <!-- My requests -->
        <record model="ir.actions.act_window" id="action_vhr_resource_request_request">
            <field name="name">My Requests</field>
            <field name="res_model">hr.job</field>
            <field name="view_type">form</field>
            <field name="context">{'REQUEST':'MY_REQUESTS', 'search_default_filter_draft': 1, 'default_request_job_type_code': 'OFFICIAL', 'search_default_filter_waiting': 1, 'search_default_filter_in_progress': 1}</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_vhr_resource_request_tree"/>
            <field name="search_view_id" ref="view_vhr_resource_request_search"/>
        </record>

        <!-- My Approvals -->
        <record model="ir.actions.act_window" id="action_vhr_resource_request_approvals">
            <field name="name">My Approvals</field>
            <field name="res_model">hr.job</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'REQUEST':'MY_APPROVALS', 'search_default_group_by_state': 1, 'rule_for_tree_form':True, 'create': False, 'edit': False, 'delete': False}</field>
            <field name="view_id" ref="view_vhr_resource_request_tree"/>
            <field name="search_view_id" ref="view_vhr_resource_request_search"/>
        </record>

        <!-- My Tasks -->
        <record model="ir.actions.act_window" id="action_vhr_resource_request_tasks">
            <field name="name">My Tasks</field>
            <field name="res_model">hr.job</field>
            <field name="view_type">form</field>
            <field name="context">
            	{'REQUEST':'MY_TASKS', 'search_default_filter_waiting': 1, 
           		 'search_default_filter_in_progress': 1, 
           		 'search_default_group_by_state': 1,
           		 'search_default_group_by_request_type': 1, 
           		 'search_default_group_by_handle': 1,
           		 'rule_for_tree_form':True, 'create': False}
            </field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_vhr_resource_request_tree"/>
            <field name="search_view_id" ref="view_vhr_resource_request_search"/>
        </record>
    </data>
</openerp>