<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
        <record id="view_hr_department_form" model="ir.ui.view">
            <field name="name">hr.department.view.form</field>
            <field name="model">hr.department</field>
            <field name="inherit_id" ref="hr.view_department_form"/>
            <field name="arch" type="xml">
                <form position="replace">
                    <form string="Department" version="7.0">
                        <sheet>
                            <group>
                                <group>
                                    <field name="name" required="1"/>
                                    <field name="code" required="1"/>                                    
                                    <field name="organization_class_id" required="1" 
                                    options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"
											on_change="onchange_organization_class(organization_class_id)"/>
                                    <field name="manager_id" attrs="{'required': [('level', 'in', [2,3])]}"
                                    options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                                    
                                    <field name="salary_setting_id"  attrs="{'invisible': [('organization_class_code','!=','DEPT')]}"
                                    options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                                    <field name="organization_class_code" invisible='1' readonly="1"/>
                                </group>
                                <group>
                                    <field name="name_en" required="1"/>
                                    <field name="level" invisible="1" readonly='1'/>
                                    <field name="parent_id"
                                    context="{'default_hierachical_code':'ORGCHART'}"	
                                    options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                                    <field name="company_id" required="1" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                                    <field name="email_group_id" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                                    <field name="active"/>
                                    <field name="hierarchical_id" invisible='1' options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                                </group>
                            </group>
                            <separator string="HRBPs"/>
                            <field name="hrbps" nolabel="1">
								<tree string="Employees">
			                        <field name="code"/>
			                        <field name="name"/>
			                        <field name="login" string='Account'/>			                        
			                        <field name="title_id"/>
			                        <field name="job_level_id"/>
			                        <field name="department_id"/>
			                        <field name="company_id"/>
			                    </tree>
                            </field>       	
                            <separator string="Assistant to HRBP"/>
                            <field name="ass_hrbps" nolabel="1">
								<tree string="Employees">
			                        <field name="code"/>
			                        <field name="name"/>
			                        <field name="login" string='Account'/>			                        
			                        <field name="title_id"/>
			                        <field name="job_level_id"/>
			                        <field name="department_id"/>
			                        <field name="company_id"/>
			                    </tree>                            	                            	
                            </field>

                            <separator string="RAMs"/>
                            <field name="rams" nolabel="1">
                            	<tree string="Employees">
			                        <field name="code"/>
			                        <field name="name"/>
			                        <field name="login" string='Account'/>			                        
			                        <field name="title_id"/>
			                        <field name="job_level_id"/>
			                        <field name="department_id"/>
			                        <field name="company_id"/>
			                    </tree>   
                            </field>

                            <field name="note" placeholder="Note ..."/>
                            <label string="*** Please press F5 to refresh the list of logs !" colspan="4"/>
                            <field name="audit_log_ids" mode="tree"
                                   widget="one2many_list" readonly="1" nolabel="1" colspan="4">
                                <tree version="7.0">
                                    <field name="timestamp" required="1" readonly="1"/>
                                    <field name="user_id" readonly="1"/>
                                    <field name="method" readonly="1"/>
                                    <field name="field_description"/>
                                    <field name="old_value_text"/>
                                    <field name="new_value_text"/>
                                </tree>
                            </field>
                        </sheet>
                    </form>
                </form>
            </field>
        </record>
        
        <record id="view_hr_department_form_fa" model="ir.ui.view">
            <field name="name">hr.department.view.form.fa</field>
            <field name="model">hr.department</field>
            <field name="arch" type="xml">
                <form string="Department" version="7.0">
                    <sheet>
                        <group>
                            <group>
                                <field name="name" required="1"/>
                                <field name="code" required="1"/>                                    
                                <field name="organization_class_id" required="1" 
                                options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"
										on_change="onchange_organization_class(organization_class_id)" domain="[('level', '!=', 1)]"/>
                                <field name="manager_id" attrs="{'required': [('level', 'in', [2,3])]}"
                                options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                            </group>
                            <group>
                                <field name="name_en" required="1"/>
                                <field name="level" invisible="1"  readonly='1'/>
                                <field name="parent_id" 
                                context="{'default_hierachical_code':'FAORGCHART'}"
                                options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                                <field name="company_id" required="1" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                                <field name="email_group_id" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                                <field name="active"/>
                                <field name="hierarchical_id" invisible='1' options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                                	                                
                            </group>
                        </group>

                        <field name="note" placeholder="Note ..."/>
                        <group string="Attributes List" col='4'>
                        	<!--Context khai bao tree-view_ref luu trong vhr_human_resource -->
                        	<field name="approval_limit"/>
                        	<field name="cost_center"/>
                        	<field name="payment_recever_id" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                        	<field name="advance_recever_id" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                        	<field name="travel_authorization_receiver_id" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                        	<field name="expense_report_recever_id" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                        	<field name="planning_approval_recever_id" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                        	<field name="budget_controller" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                        	<field name="mtk_receiver_id" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                        	<field name="non_mtk_receiver_id" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                        	<field name="good_request_receiver_id" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                        		                        	
                         </group>
                         <!--Context khai bao tree-view_ref luu trong vhr_human_resource -->
                        <label for="eform_viewer_ids" string="Eform Viewer"/>
                        <field name="eform_viewer_ids" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                        <label for="hrbp_viewer_ids" string="HRBP Viewer"/>
                        <field name="hrbp_viewer_ids" options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"/>
                       
                        <label string="*** Please press F5 to refresh the list of logs !" colspan="4"/>
                        <field name="audit_log_ids" mode="tree"
                               widget="one2many_list" readonly="1" nolabel="1" colspan="4">
                            <tree version="7.0">
                                <field name="timestamp" required="1" readonly="1"/>
                                <field name="user_id" readonly="1"/>
                                <field name="method" readonly="1"/>
                                <field name="field_description"/>
                                <field name="old_value_text"/>
                                <field name="new_value_text"/>
                            </tree>
                        </field>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="view_hr_department_tree" model="ir.ui.view">
            <field name="name">hr.department.view.tree</field>
            <field name="model">hr.department</field>
            <field name="inherit_id" ref="hr.view_department_tree"/>
            <field name="arch" type="xml">
                <field name="complete_name" position="replace">
                    <field name="code"/>
                    <field name="name"/>
                    <field name="name_en"/>
                    <field name="parent_id"/>
                    <field name="organization_class_id"/>
                </field>
                <field name="manager_id" position="after">
                    <field name="active"/>
                </field>
            </field>
        </record>
        
		<record id="view_hr_department_fa_tree" model="ir.ui.view">
            <field name="name">hr.department.fa.view.tree</field>
            <field name="model">hr.department</field>
            <field name="priority" eval="20"/>
            <field name="arch" type="xml">
            	<tree string="FA Department">
            		<field name="code"/>
	                <field name="name"/>
	                <field name="name_en"/>
	                <field name="parent_id"/>
	                <field name="organization_class_id"/>
	                <field name="company_id" groups="base.group_multi_company"/>
	                <field name="manager_id"/>
	            	<field name="approval_limit"/>
	            	<field name="cost_center"/>
	            	<field name="payment_recever_id"/>
	            	<field name="advance_recever_id"/>
	            	<field name="travel_authorization_receiver_id"/>
	            	<field name="expense_report_recever_id"/>
	            	<field name="planning_approval_recever_id"/>
	            	<field name="budget_controller"/>
	            	<field name="mtk_receiver_id"/>
	            	<field name="non_mtk_receiver_id"/>
	            	<field name="good_request_receiver_id"/>
	            	<field name="active"/>
            	</tree>
            	
            </field>
        </record>
        
        <record id="view_hr_department_search" model="ir.ui.view">
            <field name="name">hr.department.view.search</field>
            <field name="model">hr.department</field>
            <field name="inherit_id" ref="hr.view_department_filter"/>
            <field name="arch" type="xml">
                <field name="name" position='replace'>
                    <field name="name" string="Department"
                           filter_domain="['|','|',('name','ilike',self),('name_en','ilike',self),('code','ilike',self)]"/>
					<field name="parent_id"/>
					<group expand="0" string="Group By">
                        <filter string="Parent Department" icon="terp-go-home" domain="[]"
                                context="{'group_by':'parent_id'}"/>
                        <filter string="Organization Class" icon="terp-go-home" domain="[]"
                                context="{'group_by':'organization_class_id'}"/>
                    </group>
                    <group expand="0" string="Filter">
	                    <filter string="Active = True" name="active_true" icon="terp-stage"
	                            domain="[('active', '=', True)]"/>
	                    <filter string="Active = False" name="active_false" icon="STOCK_NEW"
	                            domain="[('active', '=', False)]"/>
                    </group>
                </field>
            </field>
        </record>
        
        <record id="view_hr_department_fa_search" model="ir.ui.view">
            <field name="name">hr.department.fa.view.search</field>
            <field name="model">hr.department</field>
            <field name="arch" type="xml">
                <search string="Search">
                    <field name="name" string="Department"
                           filter_domain="['|','|',('name','ilike',self),('name_en','ilike',self),('code','ilike',self)]"/>
					
					<group expand="0" string="Group By">
                        <filter string="Parent Department" icon="terp-go-home" domain="[]"
                                context="{'group_by':'parent_id'}"/>
                        <filter string="Organization Class" icon="terp-go-home" domain="[]"
                                context="{'group_by':'organization_class_id'}"/>
                    </group>
                    <group expand="0" string="Filter">
	                    <filter string="Active = True" name="active_true" icon="terp-stage"
	                            domain="[('active', '=', True)]"/>
	                    <filter string="Active = False" name="active_false" icon="STOCK_NEW"
	                            domain="[('active', '=', False)]"/>
                    </group>
                </search>
            </field>
        </record>
        
		
        <!-- Use in recruitment (Dont know why put here)-->
        <record model="ir.actions.act_window" id="act_hr_department">
            <field name="name">Department - HR</field>
            <field name="res_model">hr.department</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_hr_department_tree"/>
            <field name="search_view_id" ref="view_hr_department_search"/>
            <field name="context">{'default_hierachical_code':'ORGCHART'}</field>
        </record>
        
        <record id="hr.open_module_tree_department" model="ir.actions.act_window">
            <field name="name">Departments - HR</field>
            <field name="res_model">hr.department</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_hr_department_tree"/>
            <field name="search_view_id" ref="view_hr_department_search"/>
           <!--  <field name="context">{'default_hierachical_code':'ORGCHART','rule_for_tree_form': True,'duplicate':False,'get_pure_department_name':True}</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a department.
              </p><p>
                OpenERP's department structure is used to manage all documents
                related to employees by departments: expenses, timesheets,
                leaves and holidays, recruitments, etc.
              </p>
            </field> -->
        </record>
        
        
        <record model="ir.actions.act_window" id="act_hr_department_fa">
            <field name="name">Department - FA</field>
            <field name="res_model">hr.department</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_hr_department_form_fa"/>
            <field name="search_view_id" ref="view_hr_department_fa_search"/>
            <field name="context">{'default_hierachical_code':'FAORGCHART','rule_for_tree_form': True,'duplicate':False}</field>
        </record>
        
        <record model="ir.actions.act_window.view" id="act_open_hr_department_fa_tree">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_hr_department_fa_tree"/>
            <field name="act_window_id" ref="act_hr_department_fa"/>
        </record>

        <record model="ir.actions.act_window.view" id="act_open_hr_department_fa_form">
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_hr_department_form_fa"/>
            <field name="act_window_id" ref="act_hr_department_fa"/>
        </record>


    </data>
</openerp>