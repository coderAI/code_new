<openerp>
    <data>

        <!---->

        <record id="view_hr_holidays_submit_form" model="ir.ui.view">
            <field name="name">hr.holidays.submit.form</field>
            <field name="model">hr.holidays</field>
            <field name="type">form</field>
            <field name="priority" eval="20"/>
            <field name="arch" type="xml">
                <form string="Note">
                    <separator string="Comment" colspan="4" required="context.get('required_comment',False)"/>
                    <footer>
                        <button name="execute_workflow"
                                string="Submit" one_click_button="True"
                                type="object" icon="gtk-save"
                                class="oe_highlight" context="{'ACTION_COMMENT': action_comment}"/>
                        or
                        <button string="Cancel" class="oe_link" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>


        <!---->


        <record id="view_hr_holidays_new_form" model="ir.ui.view">
            <field name="name">Leave Request</field>
            <field name="model">hr.holidays</field>
            <field name="arch" type="xml">
                <form string="Leave Request">
                    <!--<field name="can_reset" invisible="1"/>-->
                    <field name="can_approve" invisible="1"/>
                    <field name="can_validate" invisible="1"/>
                    <field name="can_refuse" invisible="1"/>
                    <field name="can_validate_cb" invisible='1'/>
                    <field name="is_cb" invisible='1'/>
                    <field name="is_show_full_leave_information" invisible="1"/>
                    <field name="type" invisible="1"/>
                    <header>
                        <field name="state" widget="statusbar" statusbar_visible="draft,confirm,validate"
                               statusbar_colors='{"confirm":"blue","validate1":"blue","validate2":"blue","refuse":"red"}'/>
                    </header>
                    <sheet>
                        <p class="vhr_timesheet_leave_request_message">
                            <i class="fa fa-exclamation-triangle"></i>
                            After saving the request, the system will temporarily subtract your holidays.
                        </p>
                        <div class="oe_right" name="buttons">
                            <div class="oe_button_box">
                                <button string="Submit" name="action_next" states="draft" type="object"
                                        attrs="{'invisible': ['|',('is_offline', '=', True),('state','!=','draft')]}"
                                		context="{'action_directly': True}"
                                        class="oe_stat_button bg_icon_green" 
                                        icon="fa-mail-forward"
                                        /><!-- one_click_button="True"-->
                                <button string="Delete" name="delete_record" states="draft" type="object"
                                        confirm="Are you sure you want to delete this record ?"	
                                		invisible="not context.get('leave_registration',False)"
                                        class="oe_stat_button bg_icon_red"
                                        icon="fa-times"
                                        />
                                <!--HRBP, LINE MANAGER, DEPT HEAD can approve-->
                                <!--name="validate" type="workflow"-->
                                <button string="Approve"
                                        name="open_window" type="object"
                                        context="{'action':'validate', 'required_comment':False, 'state': state}"
                                        attrs="{'invisible': ['|', ('can_approve', '=', False), ('state', 'not in', ('confirm'))]}"
                                        class="oe_stat_button bg_icon_green"
                                        icon="fa-mail-forward"
                                        />
                                <!--groups="vhr_master_data.vhr_hrbp,vhr_master_data.vhr_line_manager,vhr_master_data.vhr_dept_head"-->
                                <!--HRBP, DEPT HEAD can validate-->
                                <!--name="second_validate" type="workflow"-->
                                <button string="Approve"
                                        name="open_window" type="object"
                                        context="{'action':'validate', 'required_comment':False, 'state': state}"
                                        attrs="{'invisible': ['|', ('can_validate', '=', False), ('state', 'not in', ('validate1'))]}"
                                        class="oe_stat_button bg_icon_green"
                                        icon="fa-mail-forward"/>
                                        
                                <!--CB can validate-->
                                <button string="Approve"
                                        name="open_window" type="object"
                                        context="{'action':'validate', 'required_comment':False, 'state': state}"
                                        attrs="{'invisible': ['|', ('can_validate_cb', '=', False), ('state', 'not in', ('validate2'))]}"
                                        class="oe_stat_button bg_icon_green"
                                        icon="fa-mail-forward"
                                        />
                                <!--groups="vhr_master_data.vhr_hrbp,vhr_master_data.vhr_dept_head"-->
                                <!--HRBP, LINE MANAGER, DEPT HEAD can refuse-->
                                <!--name="refuse" type="workflow"-->
                                <button string="Reject"
                                        name="open_window" type="object"
                                        context="{'action':'reject', 'required_comment':True, 'state': state}"
                                        icon="fa-times" class="oe_stat_button bg_icon_red"
                                        attrs="{'invisible': ['|', ('can_refuse', '=', False), ('state', 'not in', ('confirm','validate','validate1','validate2'))]}"
                                        />
                                <!--groups="vhr_master_data.vhr_hrbp,vhr_master_data.vhr_line_manager,vhr_master_data.vhr_dept_head"-->
                                <!--<button string="Reset to Draft" name="reset" type="workflow"-->
                                <!--icon=" fa-reply"-->
                                <!--class="oe_stat_button bg_icon_green"-->
                                <!--attrs="{'invisible': ['|', ('can_reset', '=', False), ('state', 'not in', ['confirm', 'refuse'])]}"/>-->

                            </div>
                        </div>
                        <group string="Employee Information" readonly="[('state', 'not in', ('draft'))]">
                            <group>
                                <field name="requester_id" readonly="1"
                                       options="{'save_readonly': 1, 'no_open': True}"/>
                                <field name="employee_id"
                                       options="{'save_readonly': 1, 'no_open': True, 'no_create': True}"
                                       context="{'timesheet_detail': 1, 'search_all_employee':1,'tree_view_ref':'vhr_human_resource.view_vhr_human_resource_mimimal_employee_tree'}"
                                       attrs="{'readonly':['|', ('state', 'not in', ['draft', 'confirm']), ('is_offline', '=', False)], 'required':[('holiday_type','=','employee')],'invisible':[('holiday_type','=','level')]}"
                                       on_change="onchange_employee_id(employee_id, holiday_status_id, date_from, date_to, holiday_line_ids, number_of_days_temp, is_offline, context)"/>
                               <field name="employee_code" readonly="1" options="{'save_readonly': 1}"
                                       attrs="{'readonly':['|', ('type','=','add'),('holiday_type','=','level')],'invisible':[('holiday_type','!=','employee')]}"
                                        /> 
                                <field name="is_offline" attrs="{'invisible': 1}"/>
                                <field name="check_to_date_insurance" invisible="1"/>
                                <field name="is_created" invisible='1'/>
                                <field name="is_change_from_employee" invisible='1'/>
                                <field name="name" invisible="1"/>
                            </group>
                            <group>
                                <field name="company_id"
                                       options="{'save_readonly': 1, 'no_open': True, 'no_create': True}"
                                       on_change="onchange_company_id(employee_id,company_id, holiday_status_id , date_from, date_to, holiday_line_ids, number_of_days_temp, is_offline, context)"
                                       attrs="{'readonly': [('state', 'not in', ('draft', 'confirm'))]}"
                                       invisible="1"
                                        />
                                <field name="department_id"
                                       readonly="1"
                                       options="{'save_readonly': 1, 'no_open': True, 'no_create': True}"
                                       attrs="{'readonly':['|', ('type','=','add'),('holiday_type','=','level')],'invisible':[('holiday_type','!=','employee')]}"
                                        />
                                <field name="dept_head_id" readonly="1"
                                       options="{'save_readonly': 1, 'no_open': True, 'no_create': True}"
                                       attrs="{'invisible':[('holiday_type','!=','employee')]}"/>
                                <field name="report_to_id"
                                       readonly="1"
                                       options="{'save_readonly': 1, 'no_open': True, 'no_create': True}"
                                       attrs="{'invisible':[('holiday_type','!=','employee')]}"/>
                                <field name="is_register_next_year" invisible='1'/>
                                <field name='is_change_date_to_by_hand' invisible='1'/>
                            </group>
                        </group>
                        <group string="Leave Information" readonly="[('state', 'not in', ('draft'))]">
                            <group>
                                <field name="holiday_type"
                                       on_change="onchange_type(holiday_type)"
                                       attrs="{'invisible':[('type', '=', 'remove')]}"
                                       string="Mode"
                                       context="{'employee_id':employee_id, 'company_id': company_id}"
                                        />
                                <field name="holiday_status_id"
                                       options="{'no_open': True, 'no_create': True}"
                                       attrs="{'readonly':['|',('state','not in',['draft','validate','validate2']),
                                	                               '&amp;',('is_cb','=',False),('state', 'in', ['validate','validate2']) ]}"
                                       on_change="onchange_holiday_status_id(employee_id, company_id, holiday_status_id, date_from, date_to,holiday_line_ids, number_of_days_temp, is_offline)"
                                       context="{'date_from': date_from,
                                               'employee_id':employee_id,
                                               'company_id': company_id,
                                               'tree_view_ref': 'vhr_timesheet.view_holiday_status_tree_simple'}"
                                        />
                                <field name="holiday_status_description"
                                       readonly="1"
                                	   attrs="{'invisible':[('holiday_status_description','=',False)]}"
                                       options="{'save_readonly': 1}"/>
                                
                                <field name="notes"
                                       required="False"
                                       attrs="{'readonly':['|',('state','not in',['draft','validate','validate2']),
                                	                               '&amp;',('is_cb','=',False),('state', 'in', ['validate','validate2']) ]}"/>

                                <label for="number_of_days_temp"
                                       string="Duration"
                                       digits="(14, 2)"
                                       on_change="onchange_number_of_days_temp(employee_id, company_id, holiday_status_id, date_to, date_from,
                                     is_offline, number_of_days_temp, max_leaves, holiday_line_ids)"/>
                                <div>
                                    <group col="3" attrs="{'invisible': [('type', '=', 'add')]}">
                                    	<div>
                                    		<field name="date_from" nolabel="1"
                                        	   context="{'change_date_from': True,'alert_note_temp':alert_note_temp,'is_change_date_to_by_hand':is_change_date_to_by_hand}"
                                               on_change="onchange_date_range(employee_id, company_id, holiday_status_id, date_to, date_from,holiday_line_ids, is_offline, is_change_from_employee, check_to_date_insurance, context)"
                                               attrs="{'required':[('type', '=', 'remove')]}" class="oe_inline" style="width: 45%%"/>
                                        <label string="-" class="oe_inline" style="width: 10%%"/>
                                        <field name="date_to" nolabel="1"
                                        	   context="{'change_date_to': True,'alert_note_temp':alert_note_temp,'is_change_date_to_by_hand':is_change_date_to_by_hand}"
                                               on_change="onchange_date_range(employee_id, company_id, holiday_status_id, date_to, date_from,holiday_line_ids, is_offline, is_change_from_employee, check_to_date_insurance, context)"
                                               attrs="{'required':[('type', '=', 'remove')]}" class="oe_inline" style="width: 45%%"/>
                                    	</div>
                                        
                                    </group>
                                    <div>
                                        <field name="number_of_days_temp" class="oe_inline"
                                               attrs="{'readonly':1 }"
                                               options="{'save_readonly': 1}"
                                               digits="(14, 2)"/>
                                        days
                                               	
                                    </div>
                                    <div groups="vhr_human_resource.vhr_cb">
                                        <field name="number_of_hours" class="oe_inline"
                                        	   groups="vhr_human_resource.vhr_cb"
                                               attrs="{'readonly':1 }"
                                               options="{'save_readonly': 1,'show_zero': 1}"
                                               digits="(14, 1)"/>
                                        hours
                                    </div>
                                </div>
                                <field name="to_date_insurance"
                                       attrs="{'invisible':[('check_to_date_insurance','=', False)]}"
                                       options="{'save_readonly': True}"/>
                                
                            </group>
                            <group attrs="{'invisible':[('type','=','add')]}">
                            	<field name="remain_accum_leave" readonly="1"
                                       attrs="{'invisible':['|', ('is_show_full_leave_information','=', 'limit'), ('is_show_full_leave_information','=', False)]}"
                                        groups="vhr_human_resource.vhr_cb"
                                       options="{'show_zero': 1}" class="hrs_color_warning_lb"/>
                            	<field name="moved_accum_leave" readonly="1"
                                       attrs="{'invisible':['|', ('is_show_full_leave_information','=', 'limit'), ('is_show_full_leave_information','=', False)]}"
                                        groups="vhr_human_resource.vhr_cb"
                                       options="{'show_zero': 1}"/>
                            	<field name="leaves_expired" readonly="1"
                                       attrs="{'invisible':['|', ('is_show_full_leave_information','=', 'limit'), ('is_show_full_leave_information','=', False)]}"
                                        groups="vhr_human_resource.vhr_cb"
                                       options="{'show_zero': 1}"/>      
								
                                <field name="annual_leaves_in_year" readonly="1"
                                       attrs="{'invisible':['|', ('is_show_full_leave_information','=', 'limit'), ('is_show_full_leave_information','=', False)]}"
                                        groups="vhr_human_resource.vhr_cb"
                                       options="{'show_zero': 1}" class="hrs_color_warning_lb"/>
                            	<field name="annual_leaves_in_year_by_level" readonly="1"
                                       attrs="{'invisible':['|', ('is_show_full_leave_information','=', 'limit'), ('is_show_full_leave_information','=', False)]}"
                                        groups="vhr_human_resource.vhr_cb"
                                       options="{'show_zero': 1}"/>
                            	<field name="annual_leaves_in_year_by_seniority" readonly="1"
                                       attrs="{'invisible':['|', ('is_show_full_leave_information','=', 'limit'), ('is_show_full_leave_information','=', False)]}"
                                        groups="vhr_human_resource.vhr_cb"
                                       options="{'show_zero': 1}"/>                     	
                            	
                                <field name="total_current_leaves" readonly="1"
                                       attrs="{'invisible':['|', ('is_show_full_leave_information','=', 'limit'), ('is_show_full_leave_information','=', False)]}"
                                       groups="vhr_human_resource.vhr_cb"
                                       options="{'show_zero': 1}" string="Total Of Days (up to now)"/>
                                <field name="total_leaves" readonly="1"
                                       attrs="{'invisible':[('is_show_full_leave_information','=', 'limit')]}"
                                        groups="vhr_human_resource.vhr_cb"
                                       options="{'show_zero': 1}" string="Total Of Days (up to 31/12)" class="hrs_color_warning_lb"/>
                                
                               <!-- <field name="leaves_taken" readonly="1" string='Taken Days'
                                        groups="vhr_human_resource.vhr_cb"
                                       options="{'show_zero': 1}"  class="hrs_color_warning_lb"/>-->
                                <field name="leaves_submitted" readonly="1" string='Registered Days'
                                       options="{'show_zero': 1}" groups="vhr_human_resource.vhr_cb"/>
                                
                               <!-- <field name="leaves_expired" readonly="1"
                                       groups="vhr_human_resource.vhr_cb"
                                       attrs="{'invisible':['|', ('is_show_full_leave_information','=', 'limit'), ('is_show_full_leave_information','=', False)]}"
                                       string="Expired Days"
                                       options="{'show_zero': 1}"/> -->
                               
                                <field name="remaining_leaves" readonly="1" string='Remaining Days'
                                       attrs="{'invisible':[('is_show_full_leave_information','=', 'limit')]}"
                                       options="{'show_zero': 1}" class="hrs_color_warning_lb"/>
                                
                                <field name="max_leaves" readonly="1" string='Max Days Allow To Resgister'
                                       attrs="{'invisible':['|', ('is_show_full_leave_information','=', 'limit'), ('is_show_full_leave_information','=', False)]}"
                                       options="{'show_zero': 1}"/>
                                
                                       	
                                <field name="double_validation"
                                       attrs="{'invisible':[('is_show_full_leave_information','=', False)]}"
                                       groups="base.group_no_one"
                                       readonly="1" options="{'save_readonly': 1}"/>
                                
                                <field name="virtual_remaining_leaves" readonly="1"
                                       attrs="{'invisible':1}"
                                       options="{'show_zero': 1}"/>
                            </group>
                        </group>
                        <p class="vhr_timesheet_warning_message"> <field name="alert_note" nolabel='1'/></p>
                        <p class="vhr_timesheet_warning_message"> <field name="alert_note_temp" nolabel='1' invisible='1'/></p>
                        <separator string="Details" attrs="{'invisible': [('type', '=', 'add')]}"/>
                        
                        <!--Field này chỉ không require khi đều đăng ký phép vào năm sau và leave type thuộc loại cho đăng ký phép vào năm sau -->
                        <field name="holiday_line_ids"
                        	   context="{'alert_note':alert_note,'alert_note_temp':alert_note_temp,'date_from':date_from,'date_to':date_to,'employee_id':employee_id}"
                               on_change="onchange_holiday_line(holiday_line_ids, holiday_status_id, max_leaves, context)"
                               attrs="{'readonly': [('state', 'not in', ('draft'))],
                                       'invisible': [('type', '=', 'add')], 'required': [('type', '=', 'remove'),('is_register_next_year','=',False)]}">
                            <tree string="Date" editable="bottom" create="false">
                                <field name="date" required="1" readonly="1"/>
                                <field name="status" required="1" 
                                 on_change="onchange_number_of_days_temp(status, number_of_days_temp, number_of_hours, number_of_hours_in_shift)"
                                 attrs="{'readonly': [('is_edit_status', '=', False)]}"/>
                                <field name="number_of_days_temp" required="1" readonly="1"
                                       digits="(14, 2)"
                                       options="{'save_readonly': 1}" sum="Total"/>
                                <field name="number_of_hours" readonly="1"
                                       groups="vhr_human_resource.vhr_cb"
                                       digits="(14, 1)"
                                       options="{'save_readonly': 1}" sum="Total"/>
                                
                                <field name="number_of_hours_in_shift" invisible='1' options="{'save_readonly': 1}"/>
                                <field name="is_edit_status" invisible='1'/>
                            </tree>
                        </field>
                        <notebook>
                            <page string="Log status changes">
                                <field name="state_log_ids" readonly="1"/>
                            </page>
                            <page string="Logs" groups="vhr_base.hrs_group_system,vhr_timesheet.vhr_cb_timesheet">
                                <label string="*** Please press F5 to refresh the list of logs !" colspan="4"/>
                                <field name="audit_log_ids" mode="tree"
                                       widget="one2many_list" readonly="1" nolabel="1" colspan="4">
                                    <tree>
                                        <field name="timestamp" required="1" readonly="1"/>
                                        <field name="user_id" readonly="1"/>
                                        <field name="method" readonly="1"/>
                                        <field name="field_description"/>
                                        <field name="old_value_text"/>
                                        <field name="new_value_text"/>
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                    </sheet>
                    <!--<div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>-->
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="view_tree_holiday">
            <field name="name">hr.holidays.tree</field>
            <field name="model">hr.holidays</field>
            <field name="arch" type="xml">
                <tree colors="grey:state == 'refuse';green:state == 'validate';blue:state in ('confirm','validate1')"
                      string="Leave Requests">
                    <field name="create_date"/>
                    <field name="employee_code"/>
                    <field name="employee_id"/>
                    <field name="company_id" invisible="1"/>
                    <field name="department_id"/>
                    <field name="holiday_status_id"/>
                    <field name="notes"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="number_of_days_temp" string="Leave Registration" sum="Total Days" digits="(14, 2)"/>
                    <field name="state"/>
                    <field name="waiting_for_id"/>
                    <field name="requester_id"/>
                    <field name="name" invisible="1"/>
                    <field name="holiday_type" invisible="1"/>
                    <field name="category_id" invisible="1"/>
                    <field name="manager_id" invisible="1"/>
                    <field name="user_id" invisible="1"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_tree_holiday_to_approve">
            <field name="name">hr.holidays.to.approve.tree</field>
            <field name="model">hr.holidays</field>
            <field name="arch" type="xml">
                <tree colors="grey:state == 'refuse';green:state == 'validate';blue:state in ('confirm','validate1')"
                      string="Leave Requests To Approve" create="false" edit="false">
                    <field name="create_date"/>
                    <field name="employee_code"/>
                    <field name="employee_id"/>
                    <field name="company_id" invisible="1"/>
                    <field name="department_id"/>
                    <field name="holiday_status_id"/>
                    <field name="notes"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="number_of_days_temp" string="Leave Registration" sum="Total Days" digits="(14, 2)"/>
                    <field name="state"/>
                    <field name="requester_id"/>
                    <field name="name" invisible="1"/>
                    <field name="category_id" invisible="1"/>
                    <field name="department_id" invisible="not context.get('set_visible',False)"/>
                    <field name="manager_id" invisible="1"/>
                    <field name="user_id" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="view_hr_holidays_filter" model="ir.ui.view">
            <field name="name">hr.holidays.filter</field>
            <field name="model">hr.holidays</field>
            <field name="arch" type="xml">
                <search string="Search Leave">
                    <group expand="0" string="Group By...">
                        <filter string="Company" icon="terp-personal+"
                                domain="[]"
                                context="{'group_by':'company_id','set_visible':True}" invisible="1"/>
                        <filter string="Department" icon="terp-personal+"
                                domain="[]"
                                context="{'group_by':'department_id','set_visible':True}"/>
                        <filter name="group_employee" string="Employee" icon="terp-personal"
                                domain="[]"
                                context="{'group_by':'employee_id'}"/>
                        <filter name="group_type" string="Leave Type" icon="terp-stock_symbol-selection"
                                domain="[]"
                                context="{'group_by':'holiday_status_id'}"/>
                        <filter string="Status" icon="terp-stock_effects-object-colorize"
                                domain="[]"
                                name="group_state"
                                context="{'group_by':'state'}"/>
                        <filter string="Request Month" icon="terp-go-month"
                                domain="[]"
                                context="{'group_by':'create_date'}"/>
                    </group>                    
                    <group expand="0" string="Filter By State">
                        <filter icon="terp-check" domain="[('state','=','draft')]" string="Draft"/>
                        <filter icon="terp-camera_test" domain="[('state','=','confirm')]"
                                string="Waiting LM" name="approve"/>
                        <filter icon="terp-camera_test" domain="[('state','=','validate1')]"
                                string="Waiting DH" name="approve"/>
                        <filter icon="terp-camera_test" domain="[('state','=','validate2')]"
                                string="Waiting CB" name="approve"/>
                        <filter icon="terp-camera_test" domain="[('state','=','validate')]" string="Finish"
                                name="validated"/>
                        <filter string="Cancel" name="state_cancel" icon="STOCK_NEW"
                                domain="[('state', '=', 'refuse')]"/>
                    </group>
                    <group expand="0" string="Filter By Employee">
                        <filter string="Active Employee" name="active_employee" icon="terp-stage"
                                domain="[('employee_id.active', '=', True)]"/>
                        <filter string="Inactive Employee" name="inactive_employee" icon="terp-stage"
                                domain="[('employee_id.active', '=', False)]"/>
                    </group>
                    <group expand="0" string="Filter">
                        <filter string="Current Month Request" name="current_month" icon="terp-go-month"
                                domain="[('date_from','&gt;=',(context_today()-relativedelta(months=1)).strftime('%%Y-%%m-26')), ('date_from','&lt;=',time.strftime('%%Y-%%m-25'))]"/>
                    	
                       <filter string="Current Year Request" name="current_year" icon="terp-go-month"
                                domain="[('date_from','&lt;=',time.strftime('%%Y-12-31')), ('date_from','&gt;=',time.strftime('%%Y-01-01'))]"/>
                                	
                    </group>
                    <group expand="0" string="Filter my leave requests">
                        <filter string="My Leave" name="by_login_user" icon="terp-go-month"
                                domain="[('employee_id.user_id','=',uid)]"/>
                    </group>
                    <field name="name" string="Leave Request of Employee"
                           filter_domain="['|','|','|',('name','ilike',self),('employee_id.name','ilike',self),('employee_id.login','ilike',self),('employee_id.code','ilike',self)]"/>
                    <field name="department_id"/>
                    <field name="holiday_status_id"/>
                    <field name="date_from" string="From Date &#62;="
                           filter_domain="[('date_from','>=',self)]"/>
                </search>
            </field>
        </record>


        <record id="view_hr_holidays_filter_new" model="ir.ui.view">
            <field name="name">hr.holidays.filter.new</field>
            <field name="model">hr.holidays</field>
            <field name="arch" type="xml">
                <search string="Search Leave">
                    <field name="name" string="Leave Request"
                           filter_domain="['|','|','|',('name','ilike',self),('employee_id.name','ilike',self),('employee_id.login','ilike',self),('employee_id.code','ilike',self)]"/>
                    <field name="department_id"/>
                    <field name="holiday_status_id"/>
                    <field name="date_from" string="From Date &#62;="
                           filter_domain="[('date_from','>=',self)]"/>
                    <separator/>
                    <group expand="0" string="Group By">
                        <filter name="group_employee" string="Employee" icon="terp-personal" domain="[]"
                                context="{'group_by':'employee_id'}"/>
                        <filter string="Company" icon="terp-personal+" domain="[]"
                                context="{'group_by':'company_id','set_visible':True}" invisible="1"/>
                        <filter string="Department" icon="terp-personal+" domain="[]"
                                context="{'group_by':'department_id','set_visible':True}"/>
                        <filter name="group_type" string="Type" icon="terp-stock_symbol-selection" domain="[]"
                                context="{'group_by':'holiday_status_id'}"/>
                    </group>
                </search>
            </field>
        </record>


        <record model="ir.actions.act_window" id="open_ask_holidays">
            <field name="name">Leave Registration</field>
            <field name="res_model">hr.holidays</field>
            <field name="view_mode">form</field>
            <field name="view_type">form</field>
            <field name="context">{'search_default_active_employee':1,
                'default_type': 'remove','leave_registration':1,'delete':False,	
                'rule_for_tree_form': True, 'move': False, 'approve': False, 'reject': False,'duplicate':False}
            </field>
            <field name="domain">[('type','=','remove'), '|', ('employee_id.user_id.id','=', uid),
                ('requester_id.user_id.id', '=', uid)]
            </field>
            <field name="search_view_id" ref="view_hr_holidays_filter"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to create a new leave request.
                </p>
                <p>
                    Once you have recorded your leave request, it will be sent
                    to a manager for validation. Be sure to set the right leave
                    type (recuperation, legal holidays, sickness) and the exact
                    number of open days related to your leave.
                </p>
            </field>
        </record>

        <!--<record model="ir.actions.act_window.view" id="action_open_ask_holidays_tree">
            <field name="sequence" eval="2"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_tree_holiday"/>
            <field name="act_window_id" ref="open_ask_holidays"/>
        </record>-->

        <record model="ir.actions.act_window.view" id="action_open_ask_holidays_form">
            <field name="sequence" eval="1"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_hr_holidays_new_form"/>
            <field name="act_window_id" ref="open_ask_holidays"/>
        </record>

        <record model="ir.actions.act_window" id="request_approve_holidays">
            <field name="name">Leave For Approval</field>
            <field name="res_model">hr.holidays</field>
            <field name="view_type">form</field>
            <field name="context">{'search_default_active_employee':1,
                'default_type': 'remove', 'leave_approval': 1,
                'rule_for_tree_form': True,'move':False,'duplicate':False}
            </field>
            <field name="domain">[('type','=','remove'), ('state', 'in', ('draft', 'confirm', 'validate1','validate2'))]</field>
            <field name="search_view_id" ref="view_hr_holidays_filter_new"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_request_approve_holidays_tree">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_tree_holiday_to_approve"/>
            <field name="act_window_id" ref="request_approve_holidays"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_request_approve_holidays_form">
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_hr_holidays_new_form"/>
            <field name="act_window_id" ref="request_approve_holidays"/>
        </record>

        <!--Approved-->
        <!--<record model="ir.actions.act_window" id="request_approved_holidays">-->
        <!--<field name="name">My Approvals</field>-->
        <!--<field name="res_model">hr.holidays</field>-->
        <!--<field name="view_type">form</field>-->
        <!--<field name="context">{'search_default_active_employee':1,'default_type': 'remove'}-->
        <!--</field>-->
        <!--<field name="domain">[('type','=','remove'),('state', '=', 'validate')]</field>-->
        <!--<field name="search_view_id" ref="view_hr_holidays_filter_new"/>-->
        <!--</record>-->

        <!--<record model="ir.actions.act_window.view" id="action_request_approved_holidays_tree">-->
        <!--<field name="sequence" eval="1"/>-->
        <!--<field name="view_mode">tree</field>-->
        <!--<field name="view_id" ref="view_tree_holiday_to_approve"/>-->
        <!--<field name="act_window_id" ref="request_approved_holidays"/>-->
        <!--</record>-->

        <!--<record model="ir.actions.act_window.view" id="action_request_approved_holidays_form">-->
        <!--<field name="sequence" eval="2"/>-->
        <!--<field name="view_mode">form</field>-->
        <!--<field name="view_id" ref="view_hr_holidays_new_form"/>-->
        <!--<field name="act_window_id" ref="request_approved_holidays"/>-->
        <!--</record>-->


        <!--UPDATE FOR LEAVE -->
        <record model="ir.actions.act_window" id="action_update_for_leave">
            <field name="name">Update For Leave</field>
            <field name="res_model">hr.holidays</field>
            <field name="view_mode">form</field>
            <field name="view_type">form</field>
            <field name="context">{'search_default_active_employee':1,'default_type': 'remove', 'default_is_offline':
                True,'rule_for_tree_form': True, 'move': False, 'approve': False, 'reject': False,'duplicate':False,'update_for_leave':True}
            </field>
            <field name="domain">[('type','=','remove'), ('is_offline', '=', True)]</field>
            <field name="search_view_id" ref="view_hr_holidays_filter_new"/>
        </record>

        <!--<record model="ir.actions.act_window.view" id="action_action_update_for_leave_tree">
            <field name="sequence" eval="2"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_tree_holiday"/>
            <field name="act_window_id" ref="action_update_for_leave"/>
        </record>-->

        <record model="ir.actions.act_window.view" id="action_action_update_for_leave_form">
            <field name="sequence" eval="1"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_hr_holidays_new_form"/>
            <field name="act_window_id" ref="action_update_for_leave"/>
        </record>


        <!-- SUMMARY-->

        <record model="ir.ui.view" id="view_holiday_simple">
            <field name="name">hr.holidays.report_tree</field>
            <field name="model">hr.holidays</field>
            <field name="priority">20</field>
            <field name="arch" type="xml">
                <tree colors="grey:state == 'refuse';green:state == 'validate';blue:state in ('confirm','validate1')"
                      string="Leaves History">
                    <field name="create_date"/>
                    <field name="employee_code"/>
                    <field name="employee_id"/>
                    <field name="company_id" invisible="1"/>
                    <field name="department_id"/>
                    <field name="holiday_status_id"/>
                    <field name="year" invisible="1" options="{'remove_thousand_seps': 1}"/>
                    <field name="number_of_days_temp" string="Leave Registration" digits="(14, 2)" sum="Total"/>
                    <field name="date_from"/>
                    <field name="date_to"/>
                    <field name="state"/>
                    <field name="waiting_for_id"/>
                    <field name="requester_id"/>
                    <field name="holiday_type" invisible="1"/>
                    <field name="manager_id" invisible="1"/>
                    <field name="user_id" invisible="1"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="open_leave_summary">
            <field name="name">List of Leaves</field>
            <field name="res_model">hr.holidays</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree_search_report_quickadd,form</field>
            <field name="view_id" eval="False"/>
            <field name="context">{'default_type': 'remove',
                'template_quickadd': 'LeaveQuickSearch',
                'template_position': '.oe_leave_quick_search',
                'template_fields': {'date_from': 'from_distance','date_to': 'to_distance'},
                'search_default_': 1,
                'leaves_history': 1,
                'search_default_active_employee': 1,
            	'search_default_current_month': 1,                
                'search_default_group_state': 1,
                'rule_for_tree_form': True, 'move': False}
            </field>
            <field name="domain">[('holiday_type','=','employee'),('type', '=', 'remove')]
            </field>
            <field name="search_view_id" ref="view_hr_holidays_filter"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_leave_summary_tree">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree_search_report_quickadd</field>
            <field name="view_id" ref="view_holiday_simple"/>
            <field name="act_window_id" ref="open_leave_summary"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_leave_summary_form">
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_hr_holidays_new_form"/>
            <field name="act_window_id" ref="open_leave_summary"/>
        </record>

        <!--delete this 
        <act_window
                id="hr_holidays.act_hr_leave_request_to_meeting"
                groups="base.group_erp_manager"
                name="Leave Meetings"
                src_model="hr.holidays"
                res_model="calendar.event"
                view_mode="tree,form,calendar,gantt"
                view_type="form"/>
        
		<delete model="ir.actions.report.xml" search="[('name', '=', 'holidays.summary')]"/>-->
		
    </data>
</openerp>