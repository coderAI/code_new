<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>

        <record id="view_vhr_holidays_multi" model="ir.ui.view">
            <field name="name">vhr.holidays.multi</field>
            <field name="model">vhr.holidays.multi</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Multi Leave Request" version="7.0">
                    <sheet>
                        <div class="oe_right" name="buttons">
                            <button name="open_window"
                                    string="Execute"
                                    type="object"
                                    class="oe_stat_button bg_icon_green"
                                    icon="fa-mail-forward"
                                    invisible="context.get('default_state',False)"
                                    context="{'action':'submit'}"
                            		one_click_button="True" />
                        </div>
                        <group>
                            <group>
                                <field name="holiday_status_id"
                                       on_change="onchange_holiday_status_id(holiday_status_id, number_of_days_temp)"
                                       options="{'no_open': True, 'no_create': True}"
                                       context="{'is_import':True,
                                       'tree_view_ref': 'vhr_timesheet.view_holiday_status_tree_simple'}"/>
                            </group>
                            <group>
                                <field name="company_id" invisible="1"/>
                            </group>
                        </group>
                        <group col='4'>
                            <group>
                                <label for="date_from" string="Duration"/>
                                <div>
                                    <field name="date_from" nolabel="1" style="width: 45%%"
                                           on_change="onchange_date_range(date_to, date_from)"
                                           attrs="{'required':[('type', '=', 'remove')]}" class="oe_inline"/>
                                    <label string="-" class="oe_inline" style="width: 10%%"/>
                                    <field name="date_to" nolabel="1" style="width: 45%%"
                                           on_change="onchange_date_range(date_to, date_from)"
                                           attrs="{'required':[('type', '=', 'remove')]}" class="oe_inline"/>
                                </div>
                            </group>
                            <group>
                                <div>
                                    <field name="number_of_days_temp" nolabel="1" class="oe_inline"
                                           options="{'save_readonly': 1}" style="width: 25%%"/>
                                    <label for="number_of_days_temp" string="days" style="width: 65%%"/>
                                </div>
                            </group>
                        </group>
                        <group invisible='1'>
                            <label for="is_offline" string="Is Offline"/>
                            <field name="is_offline" nolabel='1'/>
                        </group>

                        <group colspan="4">
                            <p class="vhr_timesheet_warning_message"> <field name="notes" readonly='1' nolabel='1'/></p>
                        </group>
                        
                        <group col="4">
                            <field name="file_data" filename="file_name" string="File" on_change="on_change_file(file_data,employee_ids,holiday_status_id,context)"/>
                            <field name="file_name" invisible="1"/>
                        </group>
                        <div>
							<a href="/vhr_timesheet/static/template/template_multi_update_leave.xlsx">Template Import</a>
					    </div>
                        <separator string="Details" attrs="{'invisible': [('type', '=', 'add')]}"/>
                        <field name="holiday_line_ids"
                               on_change="onchange_holiday_line(holiday_line_ids, holiday_status_id, date_from, date_to)"
                               attrs="{'invisible': [('type', '=', 'add')], 'required': [('type', '=', 'remove')]}">
                            <tree string="Date" editable="bottom" create="false">
                                <field name="date" readonly="1" options="{'save_readonly': 1}"/>
                                <field name="status" required="1" 
                                on_change="onchange_number_of_days_temp(status, number_of_days_temp, number_of_hours, number_of_hours_in_shift)"/>
                                                        						
                                <field name="number_of_days_temp" readonly="1" required="1"
                                       sum="Total"
                                       options="{'save_readonly': 1}"/>
                               <field name="number_of_hours" invisible='1'/>
                               <field name="number_of_hours_in_shift" invisible='1'/>
                            </tree>
                        </field>
                        <field name="type" invisible="1"/>
                        <group string="Employees">
                            <field name="employee_ids" nolabel="1" required="1"  
								options="{'no_quick_create' : True, 'no_create':True, 'no_open': True,'save_readonly': True}"
                                   context="{'timesheet_detail':True,
                            				 'tree_view_ref':'vhr_human_resource.view_vhr_human_resource_mimimal_employee_tree',
                            				 'filter_with_outing_leave':holiday_status_id,
                            				}"/>
                        </group>

                    </sheet>
                </form>
            </field>
        </record>

        <record id="act_vhr_holidays_multi" model="ir.actions.act_window">
            <field name="name">Multi Update For Leave</field>
            <field name="res_model">vhr.holidays.multi</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_vhr_holidays_multi"/>
            <field name="context">{'default_type': 'remove','hide_form_view_button':True}</field>
            <field name="target">current</field>
        </record>


        <record model="ir.actions.act_window" id="act_tracking_vhr_holidays_multi">
            <field name="name">Multi Update For Leave Progress</field>
            <field name="res_model">vhr.mass.status</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('model_id.model','=','hr.holidays')]</field>
            <field name="context">{'attachment':False,'rule_for_tree_form':True,'filter_by_permission_dept_admin':True,'create':False,'delete':False}</field>
            <field name="view_id" ref="vhr_common.view_vhr_mass_status_tree"/>
            <field name="search_view_id" ref="vhr_common.view_vhr_mass_status_search"/>
        </record>


    </data>
</openerp>