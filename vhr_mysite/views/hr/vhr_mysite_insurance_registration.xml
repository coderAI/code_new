<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    	
    	<template id="vhr_mysite.vhr_insurance_registration" name="Đăng ký mua Bảo hiểm sức khỏe">
    		<t t-call="website.layout">
				<div class="my_insurance_registration">
					<t t-if="message">
						<div class="my_notices">
							<div class="my_common_notice">
								<i class="fa fa-check-square-o"></i><span t-raw="message" />
							</div>
						</div>
					</t>
					<t t-if="allow_regis">
						<div class="title-info text-center">
							<h4>ĐĂNG KÝ MUA BẢO HIỂM SỨC KHỎE - NĂM 2016 <br/>
							THỜI GIAN HIỆU LỰC: 05/06/2016 - 04/06/2017</h4>
						</div>
					
						<t t-call="vhr_mysite.vhr_insurance_registration_detail" />
					</t>
					<t t-if="not allow_regis">
						<t t-call="vhr_mysite.vhr_insurance_registration_closed" />
					</t>
				</div>
			</t>
		</template>
		
		<template id="vhr_mysite.vhr_insurance_registration_closed" name="Đóng kỳ đăng ký">
			<div class="form-group col-xs-12">
				<h6>Thời hạn đăng ký Bảo hiểm sức khỏe từ 24/5 - 31/5 đã kết thúc.</h6>
			</div>
		</template>
		
		<template id="vhr_mysite.vhr_insurance_registration_detail" name="Chi tiết đăng ký">
			<t t-if="is_collaborator">
				<div class="form-group col-xs-12">
					<h6>A/ Đăng ký mua BH cho bản thân </h6>
				</div>
    			<t t-if="is_buy">
    				<div class="form-group col-xs-12">
		   				<label>
		   					<input class="radio_registration" type="radio"
								name="registration"
								value="0"
								required="required"
								disabled="true"/>
							 Không có nhu cầu đăng ký.	
						</label>
		    		</div>
		    		<div class="form-group col-xs-12">
	   					<label>
	   						<input class="radio_registration" type="radio"
								name="registration"
								value="1"
								required="required"
								checked="checked"
								disabled="true"/>
							Đăng ký mua cho bản thân - Gói 3.
						</label>
					</div>
				</t>
				<t t-if="not is_buy">
					<div class="form-group col-xs-12">
		   				<label>
		   					<input class="radio_registration" type="radio"
								name="registration"
								value="0"
								required="required"
								checked="checked"/>
							Tôi không có nhu cầu.
						</label>
		    		</div>
	    			<div class="form-group col-xs-12">
   						<label>
	   						<input class="radio_registration" type="radio"
								name="registration"
								value="1"
								required="required"/>
							Đăng ký mua cho bản thân - Gói 3.
						</label>
					</div>
				</t>
   			</t>
    		<div t-attf-class="padding-none form-group col-xs-12 family_registration #{ ( is_collaborator and not is_buy) and 'hidden' or ''}">
    			<t t-if="is_collaborator">
	    			<div class="form-group col-xs-12">
						<h6>B/ Đăng ký mua BH cho người thân</h6>
						<div class="text-left text-danger" style="margin-bottom:10px;">
							<span>* Điều kiện: Users phải đăng ký mua cho bản thân</span>
						</div>
					</div>
    			</t>
    			<t t-call="vhr_mysite.my_profile_button_save" />
	    		<div class="col-xs-12 text-center text-danger" style="margin-bottom:10px;">
					<b>*** ĐĂNG KÝ MUA BẢO HIỂM SỨC KHỎE CHO NGƯỜI THÂN ***</b>
				</div>
				<div class="col-xs-12">
					<b>Đối tượng người thân:</b> gồm Cha/Mẹ Ruột, Cha/Mẹ của Vợ/Chồng, Vợ/Chồng, Con cái. <br/>
					<b>Độ tuổi quy định:</b> Từ 15 ngày tuổi đến dưới 65 tuổi. <br/>
					Vui lòng điền thông tin <b>chính xác</b> vào form bên dưới. <br/>
				</div>
				<br />
				<div class="col-xs-12 mt20">
				<table class="table-bordered table" id="my_insurance_registration_detail">
					<thead>
						<tr>
							<th class="required">Họ và tên</th>
							<th class="required">CMND/Passport/Số giấy Khai sinh</th>
							<th class="required">Ngày sinh</th>
							<th class="required">Quan hệ</th>
							<th class="required">Gói bảo hiểm</th>
							<t t-if="my_editable"><th>Hủy</th></t>
						</tr>
					</thead>
					<tbody>
						<t t-foreach="families" t-as="family">
							<tr>
								<td>
									<t t-if="family.name">
										<a class="my_input_editable" data-type="text"
											t-att-data-value="family.name"
											data-required="1"
											data-field="name"
											data-title="Họ và tên"
											data-error-message="Họ tên người thân"
											autocomplete="off">
											<span t-esc="family.name or ''" />
										</a>
									</t>
									<t t-if="not family.name">
										<a class="my_input_editable" data-type="text"
											t-att-data-value="family.name"
											data-required="1"
											data-field="name"
											data-title="Họ và tên"
											data-error-message="Họ tên người thân"
											autocomplete="off"></a>
									</t>
								</td>
								<td>
									<t t-if="family.id_number">
										<a class="my_number_editable" data-type="text"
											t-att-data-value="family.id_number"
											data-field="id_number"
											data-required="1"
											data-title="CMND / Passport / Số giấy Khai sinh"
											data-error-message="CMND / Passport / Số giấy Khai sinh"
											data-maxlength="12"
	   										data-minlength="6"
	   										autocomplete="off">
											<span t-esc="family.id_number" />
										</a>
									</t>
									<t t-if="not family.id_number">
										<a class="my_number_editable" data-type="text"
											t-att-data-value="family.id_number"
											data-field="id_number"
											data-required="1"
											data-title="CMND / Passport / Số giấy Khai sinh"
											data-error-message="CMND / Passport / Số giấy Khai sinh"
											data-maxlength="12"
	   										data-minlength="6"
	   										autocomplete="off"></a>
									</t>
								</td>
								<td>
									<t t-if="family.birth_date">
										<a class="my_date_editable"
											data-type="combodate"
											data-title="Ngày sinh"
											t-att-data-value="family.birth_date"
											data-format="YYYY-MM-DD"
											data-viewformat="DD/MM/YYYY"
											data-template="DD / MMM / YYYY"
											data-field="birth_date"
											data-error-message="Ngày sinh">
												<span t-esc="family.birth_date and format_date(family.birth_date) or ''" />
										</a>
									</t>
									<t t-if="not family.birth_date">
										<a class="my_date_editable"
											data-type="combodate"
											data-title="Ngày sinh"
											t-att-data-value="family.birth_date"
											data-format="YYYY-MM-DD"
											data-viewformat="DD/MM/YYYY"
											data-template="DD / MMM / YYYY"
											data-field="birth_date"
											data-error-message="Ngày sinh"></a>
									</t>
								</td>
								<td>
									<t t-if="family.relation_id and family.relation_id.name">
										<a class="my_relation_id" data-type="select"
											t-att-data-value="family.relation_id.id"
											data-required="1"
											data-field="relation_id"
											data-title="Mối quan hệ"
											data-error-message="Mối quan hệ">
											<span t-esc="family.relation_id.name or ''" />
										</a>
									</t>
									<t t-if="not family.relation_id or not family.relation_id.name">
										<a class="my_relation_id" data-type="select"
											t-att-data-value="family.relation_id.id"
											data-required="1"
											data-field="relation_id"
											data-title="Mối quan hệ"
											data-error-message="Mối quan hệ"></a>
									</t>
								</td>
								<td>
									<t t-if="family.package_id and family.package_id.name">
										<a class="my_package_id" data-type="select"
											t-att-data-value="family.package_id.id"
											data-required="1"
											data-field="package_id"
											data-title="Gói bảo hiểm"
											data-error-message="Gói bảo hiểm">
											<span t-esc="family.package_id.name or ''" />
										</a>
									</t>
									<t t-if="not family.package_id or not family.package_id.name">
										<a class="my_package_id" data-type="select"
											t-att-data-value="family.package_id.id"
											data-required="1"
											data-field="package_id"
											data-title="Gói bảo hiểm"
											data-error-message="Gói bảo hiểm"></a>
									</t>
								</td>
								<t t-if="my_editable">
									<td>
										<i class="fa fa-times-circle fa-lg text-danger btn_my_remove"></i>
									</td>
								</t>
							</tr>
						</t>
					</tbody>
				</table>
				</div>
				<div class="button-extra col-xs-12">
					<t t-if="my_editable">
						<div class="col-xs-4 padding-none mt20">
							<a href="#" class="btn btn-primary btn-my-extra"
								data-table="my_insurance_registration_detail"
								id="btn_insurance_add">Thêm mới</a>
						</div>
					</t>
				</div>
				<div class="text-left text-danger col-xs-12" style="margin-bottom:10px;">
					<span>* Phí Bảo Hiểm và Thanh toán: sẽ được HR thông báo và trừ trực tiếp trong kỳ lương Tháng 7/2016 của bạn.</span>
				</div>
			</div>
		</template>
    
    </data>
</openerp>
